<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/img/cat.jpg"><title>微信小程序基础 | Vito's blog</title><meta name="description" content="vito的个人网站">
    <link rel="preload" href="/assets/style-BHfFXfh2.css" as="style"><link rel="stylesheet" href="/assets/style-BHfFXfh2.css">
    <link rel="modulepreload" href="/assets/app-Dc9h1HB2.js"><link rel="modulepreload" href="/assets/wechat-miniAppBase.html-Dk35sOIE.js">
    <link rel="prefetch" href="/assets/guide.html-UVSLI9LU.js" as="script"><link rel="prefetch" href="/assets/index.html-D_ws9Nbn.js" as="script"><link rel="prefetch" href="/assets/10sortedAlgorithm.html-DbZJTtaN.js" as="script"><link rel="prefetch" href="/assets/common.html-BosrwS7K.js" as="script"><link rel="prefetch" href="/assets/index.html-Ad-1vLOE.js" as="script"><link rel="prefetch" href="/assets/labuladongNote.html-iVy9wufO.js" as="script"><link rel="prefetch" href="/assets/leetcode100.html-_OHHHuLY.js" as="script"><link rel="prefetch" href="/assets/python_sword_for_offer.html-BCF1GcMw.js" as="script"><link rel="prefetch" href="/assets/tsClassicTop10SortAlgorithm.html-Be2nb8nG.js" as="script"><link rel="prefetch" href="/assets/tsSword4Offer.html-DLvP-Vs5.js" as="script"><link rel="prefetch" href="/assets/browser.html-De7w893N.js" as="script"><link rel="prefetch" href="/assets/index.html-D6U6T4jG.js" as="script"><link rel="prefetch" href="/assets/index.html-3F5AiQsw.js" as="script"><link rel="prefetch" href="/assets/index.html-Cwv5sxa1.js" as="script"><link rel="prefetch" href="/assets/npm-note.html-DUJtJLBV.js" as="script"><link rel="prefetch" href="/assets/html5.html-DDBaEBqv.js" as="script"><link rel="prefetch" href="/assets/html进阶.html-cCqOgMBU.js" as="script"><link rel="prefetch" href="/assets/index.html-BJmScJsu.js" as="script"><link rel="prefetch" href="/assets/longList.html-BqAiLgy4.js" as="script"><link rel="prefetch" href="/assets/webSafe.html-BTMKuB12.js" as="script"><link rel="prefetch" href="/assets/abstract.html-DOyLcV72.js" as="script"><link rel="prefetch" href="/assets/auto-app.html-Dx-UKgWt.js" as="script"><link rel="prefetch" href="/assets/jsBase.html-4I2TOM_c.js" as="script"><link rel="prefetch" href="/assets/jsHand.html-dWm9UyPc.js" as="script"><link rel="prefetch" href="/assets/jsPlus.html-BaqVDkiT.js" as="script"><link rel="prefetch" href="/assets/gitUseNote.html-BWC5YnxG.js" as="script"><link rel="prefetch" href="/assets/index.html-3Oy93F0_.js" as="script"><link rel="prefetch" href="/assets/UbuntuUsingNode.html-DMAKbJle.js" as="script"><link rel="prefetch" href="/assets/小新pro14ACH安装Ubuntu并美化.html-DalFkhmD.js" as="script"><link rel="prefetch" href="/assets/qiankun.html-CV_3rVwU.js" as="script"><link rel="prefetch" href="/assets/axios.html-CaHwIMXH.js" as="script"><link rel="prefetch" href="/assets/index.html-DN3dRT5O.js" as="script"><link rel="prefetch" href="/assets/webNetwork.html-k79iR5Fs.js" as="script"><link rel="prefetch" href="/assets/react-base.html-DQHwfbRp.js" as="script"><link rel="prefetch" href="/assets/express.html-CeW97mZD.js" as="script"><link rel="prefetch" href="/assets/koa基础.html-C67P1VsT.js" as="script"><link rel="prefetch" href="/assets/next.html-Dd8NXlM5.js" as="script"><link rel="prefetch" href="/assets/index.html-C1YIOZ0A.js" as="script"><link rel="prefetch" href="/assets/index.html-_eaEjO24.js" as="script"><link rel="prefetch" href="/assets/index.html-HFbTeAul.js" as="script"><link rel="prefetch" href="/assets/伯恩斯新情绪疗法.html-BqN74Ns2.js" as="script"><link rel="prefetch" href="/assets/伯恩斯新情绪疗法2.html-C_k4jpyQ.js" as="script"><link rel="prefetch" href="/assets/伯恩斯新情绪疗法3.html-YFVIJa5g.js" as="script"><link rel="prefetch" href="/assets/依恋的形成.html-mHQJ7Tin.js" as="script"><link rel="prefetch" href="/assets/穷查理宝典读书笔记.html-hwV4gldE.js" as="script"><link rel="prefetch" href="/assets/index.html-CXDb1UIM.js" as="script"><link rel="prefetch" href="/assets/Pinia.html-DMtMYqr1.js" as="script"><link rel="prefetch" href="/assets/vue2base.html-BKW10vaC.js" as="script"><link rel="prefetch" href="/assets/vue3plus.html-BFYQ0kit.js" as="script"><link rel="prefetch" href="/assets/webpack5Note.html-D5ZDNl44.js" as="script"><link rel="prefetch" href="/assets/webpackNote.html-DljGD_TP.js" as="script"><link rel="prefetch" href="/assets/index.html-Bfjl6N00.js" as="script"><link rel="prefetch" href="/assets/index.html-CbEtMCdi.js" as="script"><link rel="prefetch" href="/assets/index.html-CGbwLZbR.js" as="script"><link rel="prefetch" href="/assets/index.html-tOa1z37x.js" as="script"><link rel="prefetch" href="/assets/index.html-DynAh1dK.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp5pztJT.js" as="script"><link rel="prefetch" href="/assets/index.html-dPNSGnRW.js" as="script"><link rel="prefetch" href="/assets/additionalInfo.html-CaBqpYFs.js" as="script"><link rel="prefetch" href="/assets/guide.html-CyGJ2JNG.js" as="script"><link rel="prefetch" href="/assets/orgin.html-DPpEtryk.js" as="script"><link rel="prefetch" href="/assets/outputGuide.html-D8l0hNuy.js" as="script"><link rel="prefetch" href="/assets/index.html-BH3Imm23.js" as="script"><link rel="prefetch" href="/assets/guide.html-BNNQZgOK.js" as="script"><link rel="prefetch" href="/assets/mustache.html-BMmkzNlG.js" as="script"><link rel="prefetch" href="/assets/reactive.html-BOynKK6c.js" as="script"><link rel="prefetch" href="/assets/index.html-Ckz_eHKX.js" as="script"><link rel="prefetch" href="/assets/vDom.html-BaBrgSd5.js" as="script"><link rel="prefetch" href="/assets/index.html-Br4uUxEv.js" as="script"><link rel="prefetch" href="/assets/index.html-C1nlbu8D.js" as="script"><link rel="prefetch" href="/assets/index.html-B_TyEEOs.js" as="script"><link rel="prefetch" href="/assets/404.html-DIJBehUt.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">Vito&#39;s blog</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsBase.html" aria-label="js基础"><!---->js基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/es6_/" aria-label="es6+基础"><!---->es6+基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsPlus.html" aria-label="js进阶"><!---->js进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsHand.html" aria-label="js手写系列"><!---->js手写系列<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/typescript/" aria-label="typescript"><!---->typescript<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>js读书笔记</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsAsync/" aria-label="js异步编程"><!---->js异步编程<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsDeep/" aria-label="你不知道的js系列"><!---->你不知道的js系列<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2base.html" aria-label="vue2基础"><!---->vue2基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2plus/" aria-label="vue2进阶"><!---->vue2进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue3base/" aria-label="vue3基础"><!---->vue3基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vuex/" aria-label="vuex"><!---->vuex<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vueRouter/" aria-label="vue router"><!---->vue router<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/Pinia.html" aria-label="pinia"><!---->pinia<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/html/" aria-label="html"><!---->html<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="css"><span class="title">css</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="css"><span class="title">css</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3/" aria-label="图解css3"><!---->图解css3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3plus/" aria-label="css进阶"><!---->css进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/scss/" aria-label="scss"><!---->scss<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/browser/browser.html" aria-label="浏览器"><!---->浏览器<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/network/webNetwork.html" aria-label="网络通信"><!---->网络通信<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Linux"><span class="title">Linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Linux"><span class="title">Linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/gitUseNote.html" aria-label="git使用笔记"><!---->git使用笔记<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/UbuntuUsingNode.html" aria-label="linux使用记录"><!---->linux使用记录<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/devToolsNote/npm-note.html" aria-label="npm"><!---->npm<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/webpack/webpackNote.html" aria-label="webpack基础"><!---->webpack基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/webpack/webpack5Note.html" aria-label="webpack5"><!---->webpack5<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/micro-app/qiankun.html" aria-label="qiankun"><!---->qiankun<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsClassicTop10SortAlgorithm.html" aria-label="排序算法"><!---->排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsSword4Offer.html" aria-label="剑指offer"><!---->剑指offer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/common.html" aria-label="常见算法"><!---->常见算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/10sortedAlgorithm.html" aria-label="排序算法python"><!---->排序算法python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/python_sword_for_offer.html" aria-label="剑指offer-python"><!---->剑指offer-python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/labuladongNote.html" aria-label="labuladong算法"><!---->labuladong算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/vitotu" aria-label="github主页" rel="noopener noreferrer" target="_blank"><!---->github主页<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsBase.html" aria-label="js基础"><!---->js基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/es6_/" aria-label="es6+基础"><!---->es6+基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsPlus.html" aria-label="js进阶"><!---->js进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsHand.html" aria-label="js手写系列"><!---->js手写系列<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/typescript/" aria-label="typescript"><!---->typescript<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>js读书笔记</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsAsync/" aria-label="js异步编程"><!---->js异步编程<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsDeep/" aria-label="你不知道的js系列"><!---->你不知道的js系列<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2base.html" aria-label="vue2基础"><!---->vue2基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2plus/" aria-label="vue2进阶"><!---->vue2进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue3base/" aria-label="vue3基础"><!---->vue3基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vuex/" aria-label="vuex"><!---->vuex<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vueRouter/" aria-label="vue router"><!---->vue router<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/Pinia.html" aria-label="pinia"><!---->pinia<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/html/" aria-label="html"><!---->html<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="css"><span class="title">css</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="css"><span class="title">css</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3/" aria-label="图解css3"><!---->图解css3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3plus/" aria-label="css进阶"><!---->css进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/scss/" aria-label="scss"><!---->scss<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/browser/browser.html" aria-label="浏览器"><!---->浏览器<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/network/webNetwork.html" aria-label="网络通信"><!---->网络通信<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Linux"><span class="title">Linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Linux"><span class="title">Linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/gitUseNote.html" aria-label="git使用笔记"><!---->git使用笔记<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/UbuntuUsingNode.html" aria-label="linux使用记录"><!---->linux使用记录<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/devToolsNote/npm-note.html" aria-label="npm"><!---->npm<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/webpack/webpackNote.html" aria-label="webpack基础"><!---->webpack基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/webpack/webpack5Note.html" aria-label="webpack5"><!---->webpack5<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/micro-app/qiankun.html" aria-label="qiankun"><!---->qiankun<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsClassicTop10SortAlgorithm.html" aria-label="排序算法"><!---->排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsSword4Offer.html" aria-label="剑指offer"><!---->剑指offer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/common.html" aria-label="常见算法"><!---->常见算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/10sortedAlgorithm.html" aria-label="排序算法python"><!---->排序算法python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/python_sword_for_offer.html" aria-label="剑指offer-python"><!---->剑指offer-python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/labuladongNote.html" aria-label="labuladong算法"><!---->labuladong算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/vitotu" aria-label="github主页" rel="noopener noreferrer" target="_blank"><!---->github主页<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">微信小程序基础 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="微信小程序基础" tabindex="-1"><a class="header-anchor" href="#微信小程序基础"><span>微信小程序基础</span></a></h1><p>hybrid app包含小程序(微信、抖音、支付宝等平台)， native app、H5页面等；<br><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener noreferrer">微信小程序官方文档</a><br> 本文用于记录小程序的入门用法，会经常与vue进行类比学习，因此要求读者具备一定的vue知识</p><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>web端通常运行于浏览器，在微信中使用WebView，JSBridge,JsCore等技术展示页面并提供平台的开放能力；<br> 网页开发中渲染线程与引擎线程(脚本执行线程)是互斥的，但对应小程序需中的渲染层和逻辑层是分开的<br> 微信小程序的逻辑层中没有DOM、BOM相关api</p><h3 id="开发环境搭建" tabindex="-1"><a class="header-anchor" href="#开发环境搭建"><span>开发环境搭建</span></a></h3><p>开发微信小程序面对的不是chrome等浏览器，因此需要搭建对应的开发环境，仅需两步：</p><ol><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/getstart.html#%E7%94%B3%E8%AF%B7%E5%B8%90%E5%8F%B7" target="_blank" rel="noopener noreferrer">申请账号</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener noreferrer">微信开发这工具</a></li></ol><p>PS：开发者工具仅支持window和macOS两个平台<br> TODO：完善利用VScode进行开发的文档</p><h3 id="代码结构简介" tabindex="-1"><a class="header-anchor" href="#代码结构简介"><span>代码结构简介</span></a></h3><p>通过开发者工具创建的项目，在主目录中通常包含<br> app.json文件用于小程序<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html" target="_blank" rel="noopener noreferrer">全局配置</a>，及页面注册<br> project.config.json开发者工具配置<br> sitemap.json用于配置微信索引，类似于SEO，<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/sitemap.html" target="_blank" rel="noopener noreferrer">完整配置</a><br> app.js入口文件<br> app.css/app.wxss全局样式<br> pages目录，存放页面文件</p><p>页面目录结构以index为例通常为：</p><div class="custom-container tip"><p class="custom-container-title">目录结构</p><p>pages/index/<br> ├── index.json 当前<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html" target="_blank" rel="noopener noreferrer">页面配置</a>与app.json类似，在当页会覆盖app.json中的部分相同配置<br> ├── index.wxss 页面样式，类似于css<br> ├── index.js 页面逻辑<br> └── index.wxml 页面结构， 类似于vue的template，但仅支持微信中提供的标签或自定义的组件</p></div><h3 id="宿主环境" tabindex="-1"><a class="header-anchor" href="#宿主环境"><span>宿主环境</span></a></h3><p>小程序运行环境是由微信客户端提供的，分成渲染层(运行WXML和WXSS)和逻辑层(运行js脚本)，分别对应了两个不同的线程管理,网络请求则由native转发</p><p>与VUE的VM类似小程序只有一个app实例，js文件中window对象被wx对象取代，wx对象上包含多种微信开放能力api<br> 微信客户端在装在页面时会优先读取json配置文件，而后是wxml,wxss文件，最后加载js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// app.js文件中</span></span>
<span class="line"><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">onLaunch</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// index.js页面文件中</span></span>
<span class="line"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">onLoad</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="协作开发与发布上线" tabindex="-1"><a class="header-anchor" href="#协作开发与发布上线"><span>协作开发与发布上线</span></a></h3><p>依托微信，小程序的上线需要通过开发者工具将代码打包上传至腾讯，由腾讯的服务器负责资源分发<br> 搜索微信公共平台，使用注册的微信号扫码，选择对应小程序登录，即可访问小程序管理后台<br> 小程序管理后台可设置开发者权限，体验者权限等进行协作开发<br> 管理后台进行小程序版本管理，包含提交的版本(开发者工具上提交的版本)、体验版本，上线版本等</p><h2 id="小程序框架" tabindex="-1"><a class="header-anchor" href="#小程序框架"><span>小程序框架</span></a></h2><p>小程序框架主要分为逻辑层和视图层，并在两层间提供的数据传输和事件系统</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/scene.html" target="_blank" rel="noopener noreferrer">场景值</a>描述用户进入小程序的路径</p><h3 id="视图层" tabindex="-1"><a class="header-anchor" href="#视图层"><span>视图层</span></a></h3><p>视图层主要由wxml和wxss编写，将逻辑层的数据映射为视图，同时将视图层的事件发送给逻辑层<br> 小程序的数据也是响应式的，wxml中同样支持类似于vue的模板语法：</p><ul><li>wxml</li></ul><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token comment">&lt;!-- wxml --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tapMessage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{value}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 双向绑定(只能绑定单个字段，不支持路径)</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-component</span> <span class="token attr-name"><span class="token namespace">model:</span>properties-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{value}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 自定义组件的双向绑定</span>
<span class="line">与vue中类似，自定义组件需设置properties属性，子组件内部通过this.setData({name:&#39;&#39;})的方式主动触发更新</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{array}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span> 列表渲染</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{view == &#39;webview}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>webview<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span> 条件渲染</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{view == &#39;app}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{view == &#39;MINA}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>MINA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">array</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">view</span><span class="token operator">:</span><span class="token string">&#39;MINA&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">tapName</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>wxss</li></ul><p>wxss具有css大部分特性，同时对css进行了两点扩展：</p><ol><li>尺寸单位：rpx，以iPhone6屏幕为参考，iPhone屏幕宽度为375px，共有750个物理像素，对应750rpx的宽度</li><li>样式导入：使用@import导入外联样式时，使用相对路径并以<code>;</code>结束</li></ol><p>目前仅支持类选择器、id选择器、元素选择器、群组选择器、<code>::after</code>、<code>::before</code>这6种</p><ul><li>wxs</li></ul><p>wxs是小程序的一套脚本语言，类似于<code>&lt;script&gt;</code>标签，但有其独特的语法，<br> 运行环境与其他js代码隔离，不依赖于运行时的基础库版本<br> 基础库版本低于2.4.4时，其函数不能作为组件的事件回调<br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/" target="_blank" rel="noopener noreferrer">参考文档</a></p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>m1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  var msg = &quot;hello world&quot;;</span>
<span class="line">  module.exports.message = msg;</span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>m2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./test.wxs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{m1.message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>获取界面上的节点信息(类似DOM api)</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// 生成SelectorQuery对象，可用于在指定范围内找到wxml节点对象</span></span>
<span class="line"><span class="token keyword">const</span> query <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createSelectQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自定义组件中推荐使用this.createSelectorQuery()</span></span>
<span class="line">query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 返回NodesRef对象实例，类似于DOM节点</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/SelectorQuery.html" target="_blank" rel="noopener noreferrer">SelectorQuery文档</a><br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/NodesRef.html" target="_blank" rel="noopener noreferrer">NodesRef对象文档</a></p><p>wx.createInterSectionObserver api则与浏览器的IntersectionObserver api 类似</p><ul><li>初始渲染缓存</li></ul><p>小程序初始化逻辑层时，先初始化页面this对象，然后发送相关数据到视图层，视图层等待逻辑层初始化完毕后，渲染页面<br> 冷启动时，逻辑层初始化事件较长，启用初始渲染缓存可以让视图层直接使用缓存的数据而无需等待逻辑层初始化完毕，从而加速启动过程<br> 通过json文件中增加<code>&quot;initialRenderingCache&quot;:&quot;static&quot;</code>配置项开启渲染缓存，小程序首次打开后页面初始数据将被缓存，在第二次打开时检查缓存命中</p><h3 id="逻辑层" tabindex="-1"><a class="header-anchor" href="#逻辑层"><span>逻辑层</span></a></h3><p>小程序js代码会在启动时运行，直到小程序销毁，类似于ServiceWorker, 逻辑层也称为App Service</p><p>在app.js文件中，调用<code>App()</code>方法注册小程序实例，与vue类似，整个小程序只有一个app实例，全页面共享，<code>可通过getApp</code>方法获取到这个唯一的实例<br> 在各页面的js文件中，使用<code>Page()</code>方法注册页面，与vue的mixin类似，小程序通过引入behaviors选项可实现，多个页面有相同的数据字段和方法<br> 对于复杂页面可以使用<code>Component</code>方法来构造页面，语法上与<code>Page()</code>的主要区别是方法要放在<code>methods()</code>选项中</p><ul><li>页面路由</li></ul><p>小程序页面路由全部由框架管理，维护有页面栈，可通过wx.navigate*等api进行手动跳转，也可使用<code>&lt;navigator open-type=&quot;navigate*&quot;&gt;&lt;/navigator&gt;</code>等组件</p><ul><li>模块化</li></ul><p>小程序仅支持module.exports和require的方式进行模块导出和导入<br> TODO：npm包管理器的使用</p><ul><li>API</li></ul><p>小程序通过API开放微信的能力，主要分为同步API和异步API； 异步api支持回调和promise两种方式，若结构参数Object中不含<code>success/fail/complete</code>时，默认返回promise对象，但部分结构<code>downloadFile, request, createCamera</code>等还需要自行promisify封装<br> wx.onUnhandledRejection可以监听未处理的Promise拒绝事件</p><h2 id="页面生命周期" tabindex="-1"><a class="header-anchor" href="#页面生命周期"><span>页面生命周期</span></a></h2><p><code>Page()</code>定义的页面在不同的运行阶段提供了生命周期函数：</p><ul><li>onLoad(query) 页面加载时触发，query传递了当前页面路径中的参数，类似于路由query参数</li><li>onShow 页面显示或切入前台时触发</li><li>onReady 页面初次渲染完成时触发，页面此时可以和视图层进行交互</li><li>onHide 页面隐藏或切入后台时触发 如 wx.navigateTo 或底部 tab 切换到其他页面</li><li>onUnload 页面卸载时触发，如wx.redirectTo或wx.navigateBack到其他页面时</li></ul><p><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/page-lifecycle.2e646c86.png" alt="生命周期"></p><p>TODO:</p><p>冷启动：用户首次打开或小程序销毁后用户再次打开，再次打开时，若带有path则进入对应path页面，若无path则进入首页或遵循重新启动策略<code>restartStrategy</code><br> 热启动：已打开过小程序，小程序未被销毁，从后台切换到前台为热启动，热启动可利用场景值和path再次回到小程序或对应的页面</p><p>前台：界面被展示给用户，称为前台状态<br> 后台：关闭小程序时，小程序并没有真正关闭，而是进入后台状态，此时小程序还可短暂运行一小段时间，但部分api受限(常规切后台方式外，前台运行时锁屏或直接将微信切后台均可进入后台方式)<br> 小程序进入后台后5秒，会停止小程序js线程执行，随后进入挂起状态，此时会保存小程序内存状态，但代码会停止执行，事件及接口回调会在再次进入前台时触发<br> 当使用了后台音乐播放、后台地理位置等能力时小程序可以在后台持续运行<br> 当小程序可能将要被销毁前<code>onSaveExitState</code>函数会被调用，在回调中可以通过返回数据对象的方式缓存一些数据，返回对象格式：<code>{data:Object, expireTimeStamp: time}</code></p><h2 id="组件化开发" tabindex="-1"><a class="header-anchor" href="#组件化开发"><span>组件化开发</span></a></h2><p>小程序的页面通常通过<code>Page()</code>构造器定义，但也可以视为自定义组件通过<code>Component()</code>来构造，此时需要对应json文件中配置usingComponents字段，此时组件可接收页面参数(query参数等)，详见<a href="#properties">properties</a>章节</p><ul><li>创建自定义组件：在js中通过<code>Component()</code>来注册组件，在json文件中声明<code>&quot;component&quot;:true</code>字段</li><li>使用组件: 在json文件使用声明<code>&quot;usingComponents&quot;:{&quot;component-tag-name&quot;:&quot;自定义组件的路径&quot;}&quot;</code></li></ul><h3 id="模板语法" tabindex="-1"><a class="header-anchor" href="#模板语法"><span>模板语法</span></a></h3><p>与vue类似，小程序wxml可以通过<code>{{xxx}}</code>引用data选项中的数据xxx,并且xxx支持简单的js表达式<br> 同时支持数据绑定、条件渲染、列表渲染等</p><ul><li>数据绑定</li></ul><p>如在wxml中<code>&lt;input value=&quot;{{valueOfData}}&quot;/&gt;</code>的方式单项绑定data配置项中的数据，使用<code>this.setData()</code>更相关数据后wxml也会做出相应更新<br> 简易双向绑定<code>&lt;input model:value=&quot;{{valueOfData}}&quot;&gt;</code>当输入框值被改变时，<code>this.data.valueOfData</code>也会被改变，<code>valueOfData</code>不能为路径形式(如a.b)<br> TODO: 自定义组件的双向绑定</p><ul><li>列表渲染</li></ul><p>如<code>&lt;view wx:for=&quot;{{array}}&quot;&gt;{{index}}:{{item}}&lt;/view&gt;</code>遍历array默认数据的当前项下标为index，值为item,可通过<code>wx:for-index=&quot;i&quot;</code>和<code>wx:for-item=&quot;itemName&quot;</code>属性指定下标和值变量名<br><code>wx:key</code>属性与vue和react中类似，指定列表项目中的唯一标识，其值为字符串(标识item的某个属性，该属性是字符串或数字类型)或<code>*this</code>保留关键字(标识item本身)</p><p>ps：花括号和引号之间如果有空格，将最终被解析成为字符串<code>wx:for=&quot;{{[1,2]}} &quot;</code>等价于<code>wx:for=&quot;{{[1,2]+&#39; &#39;}}&quot;</code></p><ul><li>条件渲染</li></ul><p>通过指令<code>wx:if=&quot;{{condition}}&quot;</code>、<code>wx:elif=&quot;{{}}&quot;</code>、<code>wx:else</code>组合使用可以控制标签或组件是否渲染<br> 通过与<code>&lt;block&gt;&lt;/block&gt;</code>标签配合可一次性控制多个标签的渲染，并且block本身不会在页面中做任何渲染，不影响DOM结构<br> 与vue类似，条件渲染包含了组件的创建销毁或重新渲染，与hidden属性直接控制显示与隐藏不同</p><ul><li>模板<code>&lt;template/&gt;</code></li></ul><p>与vue中的<code>&lt;template/&gt;</code>标签不同，小程序中模板标签更类似于在wxml中定义“标签变量”，通过name属性和is属性用于定义和指定使用的“变量”<br> 使用时通过data prop传入模板中使用的数据，PS：模板有自己的独立作用于，只能使用data传入的数据以及模板定义文件中定义的<code>&lt;wxs/&gt;</code>模块</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>odd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>odd{{index}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>even<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>even{{index}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token attr-name">{{[1,2,3,4,5]}}</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item % 2 === 0 ? &#39;even&#39; : &#39;odd&#39;}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{index}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用模板</li></ul><p><code>&lt;import src=&quot;filePath.wxml&quot;/&gt;</code>可以引用filePath.wxml中定义的template“标签变量”，而后在当前文件中使用<br> import有作用域，不能做到“深度”引用，如 C import B , B import A, B中可以使用A中的template，但C不可直接使用A中的template</p><p><code>&lt;include src=&quot;filePath.wxml&quot;/&gt;</code>可以引入filePath.wxml中除了template和wxs外的全部代码，并替换include标签位置</p><h3 id="data配置项" tabindex="-1"><a class="header-anchor" href="#data配置项"><span>data配置项</span></a></h3><p>这里data在页面加载时将数据传至渲染层，随后与react风格类似通过<code>this.setData()</code>对数据进行更新</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// Page() 页面构造器也相同</span></span>
<span class="line">  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&#39;value of a&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>a <span class="token comment">// 读取data中定义的属性</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&#39;new value of a&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置data中对应属性</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>this.setData(Object, callback)</code>函数异步的将数据从逻辑层发送到视图层，同步的改变对应this.data的值。因此不推荐直接修改this.data，会导致数据与页面状态不一致<br> 其中Object中的key对应data配置项中的key，支持数据路径形式给出<code>a[1].b.</code>，也不需要在data中预先定义<br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#Page-prototype-setData-Object-data-Function-callback" target="_blank" rel="noopener noreferrer">详细规则参考</a></p><h3 id="properties" tabindex="-1"><a class="header-anchor" href="#properties"><span>properties</span></a></h3><p>组件独有的，用于定义组件的组参</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">customName</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token comment">// 属性类型必填项</span></span>
<span class="line">      <span class="token literal-property property">optionalTypes</span><span class="token operator">:</span> Array<span class="token punctuation">,</span> <span class="token comment">// 可选属性类型，非必填</span></span>
<span class="line">      <span class="token literal-property property">value</span><span class="token operator">:</span> defaultValue<span class="token punctuation">,</span> <span class="token comment">// 属性初始值，非必填</span></span>
<span class="line">      <span class="token literal-property property">observer</span><span class="token operator">:</span> Function <span class="token comment">// 属性变化时的回调函数，非必填，暂不推荐使用该选项</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 在其他方法或hook中访问时，通过data访问 ： this.data.customName</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="observers数据监听器" tabindex="-1"><a class="header-anchor" href="#observers数据监听器"><span>observers数据监听器</span></a></h3><p>与vue的watch选项类似，监听数据变化，并且可同时监听多个</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">observers</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;numberA, numberB&#39;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">numberA<span class="token punctuation">,</span> numberB</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 同时监听多个数据</span></span>
<span class="line">    <span class="token string-property property">&#39;some.subfield.*&#39;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">subfield</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 支持监听子属性，也支持使用通配符*</span></span>
<span class="line">    <span class="token string-property property">&#39;arr[12]&#39;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr12</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 监听特定索引值</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h3><ul><li>app实例</li></ul><p>通过<code>getApp()</code>方法可以获取到小程序的全局唯一app实例</p><ul><li>页面实例</li></ul><p><code>getCurrentPages()</code>获取当前页面栈，数组中第一个元素为首页，最后一个元素为当前页面</p><ul><li>普通标签实例</li></ul><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html" target="_blank" rel="noopener noreferrer">节点查询api</a>则与<code>document.querySelector()</code>api类似可获取节点实例，但能进行的操作有限</p><ul><li>组件实例</li></ul><p>在父组件中通过<code>this.selectComponent(&quot;cssSelector&quot;)</code>方法获取子组件实例对象<br> 子组件实例对象上可访问的数据是由子组件的<code>behaviors:wx//component-export</code>来控制</p><h3 id="事件" tabindex="-1"><a class="header-anchor" href="#事件"><span>事件</span></a></h3><ul><li>内置事件(原生事件)</li></ul><p>在wxml标签属性中，可以使用bind前缀：<code>bind*=&quot;callback&quot;</code> (或<code>bind:*=&quot;callback&quot;</code>) 来绑定一个事件；</p><p>阻止冒泡：也可以使用<code>catch*</code>前缀绑定来阻止事件向上冒泡(包括阻断从子元素冒泡上来的事件)；</p><p>互斥事件：使用<code>mut-bind:</code>前缀绑定则会在<code>mut-bind:</code>各级绑定中仅有一个绑定函数会被触发；</p><p>捕获阶段：给上述三种绑定加上<code>capture-*</code>前缀则可在事件捕获阶段监听事件,其中<code>capture-catch*</code>将取消冒泡阶段</p><ul><li>wxs中的回调函数</li></ul><p>wxs从2.4.4基础库版本后支持函数绑定事件，接收2个参数event和ownerInstance对象，具体用法<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html" target="_blank" rel="noopener noreferrer">详见</a></p><ul><li>事件种类与冒泡</li></ul><p>事件分为冒泡事件与非冒泡事件，冒泡事件包含touch*, tap, longpress, longtap以及动画相关事件，其他如无特殊声明均为非冒泡事件</p><p>事件对象的种类即其包含的属性方法<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html" target="_blank" rel="noopener noreferrer">详见</a></p><ul><li>自定义事件</li></ul><p>在父组件或页面上中调用自定义组件时可通过<code>bindmyevent=&quot;onMyEvent&quot;</code>绑定自定义的事件及回调<br> 在自定义组件中通过<code>this.triggerEvent(&#39;myevent&#39;, params, options)</code>触发对应的事件，并传递数据和选项<br> 选项包括bubbles, composed, capturePhase分别表示事件是否冒泡、是否可穿越组件边界、是否拥有捕获阶段，默认值均为false</p><h3 id="组件样式" tabindex="-1"><a class="header-anchor" href="#组件样式"><span>组件样式</span></a></h3><p>组件对应wxss仅对组件内节点生效，组件定义与使用时仅能使用class选择器，避免使用后代选择器，继承样式会影响到组件内，其他样式则不会影响<br> 与vue的scoped类似，组件的样式也存在隔离，可以通过js的的方式来指定隔离选项</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span><span class="token string">&#39;isolated&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 默认值，自定义组件内外，使用 class 指定的样式将不会相互影响</span></span>
<span class="line">    <span class="token comment">// apply-shared // 页面wxss样式将影响到自定义组件，组件不会影响页面</span></span>
<span class="line">    <span class="token comment">// shared // 页面影响组件，组件会影响其他设置了apply-shared或shared的组件</span></span>
<span class="line">    <span class="token comment">// page-isolated // 组件作为页面时，页面禁用app.wxss，同时页面不会影响其他组件</span></span>
<span class="line">    <span class="token comment">// page-apply-shared // 同上，但设为shared的组件会影响页面</span></span>
<span class="line">    <span class="token comment">// page-shared // 禁用app.wxss，其他与shared相同</span></span>
<span class="line">    <span class="token literal-property property">addGlobalClass</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 等价与 styleIsolation:apply-shared,但styleIsolation会屏蔽此选项</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">externalClasses</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;my-class&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 支持外部传入 className</span></span>
<span class="line">  <span class="token literal-property property">virtualHost</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 将组件节点虚拟化，类似于vue中template节点</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.10.1版本后也支持在json文件中配置styleIsolation字段<br> 另外使用标签选择器或其他特殊选择器，则对应样式会全局生效<br> 通过<code>class=&quot;~class-name&quot;</code>的方式组件可以引用页面中对应的样式, 通过<code>^</code>前缀的方式可以引用父组件中对应的样式，该系列前缀可连续使用<br> css中background-image不支持本地url()，仅可使用网络图片或base64</p><h3 id="组件生命周期" tabindex="-1"><a class="header-anchor" href="#组件生命周期"><span>组件生命周期</span></a></h3><p>与vue类似，小程序组件也有其生命周期函数，可以直接定义在Component一级参数中，也可以使用lifetimes字段声明(推荐方式，优先级最高)</p><p>组件可用的生命周期函数</p><ul><li>create 组件实例刚创建号，setData还不能调用，此阶段通常用于给this添加自定义属性</li><li>attached 组件初始化完成，进入页面节点树后，类似于挂载。通常在此阶段进行初始化工作</li><li>ready 组件在视图层布局完成后执行</li><li>moved 组件实例被移动到节点树的另一位置时执行</li><li>detached 组件离开页面节点树后，类似于卸载</li><li>error 组件方法抛出错误时执行</li></ul><p>这些生命周期函数可以在一级参数中声明，但更推荐在lifetimes字段中进行声明(优先级更高)</p><p>组件所在页面的生命周期函数，定义与pageLifetimes字段中</p><ul><li>show 组件所在页面被展示时执行</li><li>hide 组件所在页面被隐藏时执行</li><li>resize 组件所在页面尺寸变化时执行</li></ul><p><a href="#behaviors">behavior</a>中也可声明同名的生命周期函数，并且不会与其他behavior中的同名相互覆盖</p><p>作为页面时，页面的生命周期函数应该写在methods字段中</p><h3 id="组件间通信" tabindex="-1"><a class="header-anchor" href="#组件间通信"><span>组件间通信</span></a></h3><ul><li>wxml数据绑定：定义properties选项用于接收绑定的数据，与vue中props类似，可用于父传子通信</li><li>事件： 自定义事件，父组件<code>bind:myevent=&quot;callback&quot;</code>， 子组件<code>this.triggerEvent(&#39;myevent&#39;, detailObject, eventOption)</code>与vue中emit类似 子传父</li></ul><p>另外还可通过父组件还可通过<code>this.selectComponent(&#39;.children-component&#39;)</code>方法获取子组件实例对象<br> 默认情况下，小程序与插件，插件之间的不同组件无法通过该方法获取组件实例，可通过子组件中<code>behaviors:wx://component-export</code>配置及<code>export(){return customObject}</code>方法指定<code>this.selectComponent(&#39;.children-component&#39;)</code>的返回值</p><h3 id="behaviors" tabindex="-1"><a class="header-anchor" href="#behaviors"><span>behaviors</span></a></h3><p>类似于vue中的mixin混入, 组件中引入时，对应的属性、数据和方法会被合并到组件中，生命周期函数会在对应的时机调用<br> behavior中也可以引入其他behavior</p><ul><li>合并规则</li></ul><p>同名生命周期函数和observers，behavior中先于组件中执行，嵌套式被引用者先于引用者，靠前先于靠后；<br> 同名属性或方法组件中生效，behavior引用其他behavior时，引用者生效；<br> 同名数据字段，对象类型进行合并，其他情况引用者覆盖被引用者，靠后的behavior覆盖靠前的behavior；</p><ul><li>内置behavior</li></ul><p>wx://form-field 为自定义组件添加表单控件行为，使form组件识别自定义组件<br> wx://form-field-group 添加表单空间组行为，与上类似<br> wx://form-field-button 使form识别表单内部button<br> wx://component-export 使组件支持export定义，可用于执行组件被<code>selectComponent</code>调用时的返回值</p><ul><li>自定义组件扩展</li></ul><p>在behavior中可使用definitionFilter函数对自检进行扩展，函数接收两个参数:defFields为使用方对象(component/behaviors) definitionFilterArr是该behavior所引入的behavior的definitionFilter函数列表<br> 示例：A使用了B，A的声明就会调用B的definitionFilter函数，并传入A的定义对象<br> 若B还使用了C和D则，B可以决定要不要通过definitionFilterArr调用C和D的definitionFilter函数<br> TODO：不确定是B决定还是A决定，此处待详细学习</p><h3 id="插槽" tabindex="-1"><a class="header-anchor" href="#插槽"><span>插槽</span></a></h3><p>组件wxml模板中支持<code>&lt;slot&gt;&lt;/slot&gt;</code>标签，与vue中插槽类似，默认情况只能有一个slot，多个slot需要在js中声明启用<br> 多个slot用不同的name区别，使用时通过<code>&lt;view slot=&quot;name&quot;/&gt;</code>方式指定要插入的slot，与具名插槽类似</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">multipleSlots</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="relations组件间关系" tabindex="-1"><a class="header-anchor" href="#relations组件间关系"><span>relations组件间关系</span></a></h3><p>relations字段可用于指定组件间关系，并绑定对应的生命周期函数，如：</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-ul</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-li</span><span class="token punctuation">&gt;</span></span>item1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-li</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-li</span><span class="token punctuation">&gt;</span></span>item2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-li</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-ul</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// custom-ul.js</span></span>
<span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">relations</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;custom-li&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;child&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function-variable function">linked</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// custom-li被插入时执行，target为该节点的实例对象，在attached之后触发</span></span>
<span class="line">      <span class="token function-variable function">linkChanged</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// custom-li被移动后执行，在触发该节点的moved之后</span></span>
<span class="line">      <span class="token function-variable function">unlinked</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// custom-li被移除时执行，detached之后触发</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">ready</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> nodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRelationNodes</span><span class="token punctuation">(</span><span class="token string">&#39;path to custom-li&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 获取nodes数组，包含所有已关联的custom-li，有序</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// custom-li.js</span></span>
<span class="line"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">relations</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;./custom-ul&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;parent&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function-variable function">linked</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 被插入到custom-ul中时执行，触发在attached之后，target时custom-ul的实例对象</span></span>
<span class="line">      <span class="token function-variable function">linkChanged</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 与上类比对应</span></span>
<span class="line">      <span class="token function-variable function">unlinked</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 与上类比对应</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 两组件定义中需要都加入relations定义才能生效</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>另外子组件使用了共同的behaviors选项后，path key可以用对用behaviors来代替并在父组件中设置target为对应behaviors，type可分别设置为ancestor, descendant</p><h3 id="纯数据字段" tabindex="-1"><a class="header-anchor" href="#纯数据字段"><span>纯数据字段</span></a></h3><p>纯数据字段类似于vue中无响应式的字段(但不完全)，仅用于组件内部，不可用于wxml中，也不可能传递给其他组件<br> 纯数据字段可用于提升页面性能<br> 通过<code>Component({options:{pureDatePattern:正则表达式}})</code><br> 或json中<code>{&quot;pureDatePattern&quot;:&quot;正则表达式&quot;}</code>的pureDatePattern选项配置正则表达式<br> 被正则匹配中的properties和data中的字段都将被执行为纯数据字段<br> 但数据监听器observers仍然可以监听纯数据字段</p><h3 id="抽象节点" tabindex="-1"><a class="header-anchor" href="#抽象节点"><span>抽象节点</span></a></h3><p>类似于vue中的内置组件component, 具体组件使用的组件由传入参数决定<br> 与vue中component不同的是，小程序中抽象节点可自定义，如：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token comment">&lt;!-- selectable-group.wxml --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{labels}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectable</span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{false}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectable</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    {{item}}</span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token comment">&lt;!-- 父组件中， 其中custom-radio仅支持静态值 --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectable-group</span> <span class="token attr-name"><span class="token namespace">generic:</span>selectable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-radio<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token comment">// 对应selectable-group.json</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;componentGenerics&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;selectable&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// &quot;selectable&quot;:{&quot;default&quot;:&quot;path to default component&quot;} // 设定默认虚拟节点</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 对应父组件json中</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;usingComponent&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;custom-radio&quot;</span><span class="token operator">:</span><span class="token string">&quot;path to custom-radio&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="占位组件" tabindex="-1"><a class="header-anchor" href="#占位组件"><span>占位组件</span></a></h3><p>使用分包异步化或用时注入等特性时，自定义组件所引用的其他组件处于暂时不可用状态，可使用其他可用的组件进行占位，称为占位组件</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token comment">// 在页面json文件中</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;usingComponent&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;comp-a&quot;</span><span class="token operator">:</span><span class="token string">&quot;path to comp-a&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;componentPlaceHolder&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// comp-a 的占位组件为内置组件view,也可指定为其他注册过的自定义组件如comp-b</span></span>
<span class="line">    <span class="token comment">// 当comp-b被指定为占位组件后，为comp-b指定占位组件是无效的</span></span>
<span class="line">    <span class="token property">&quot;comp-a&quot;</span><span class="token operator">:</span><span class="token string">&quot;view&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="页面栈-路由" tabindex="-1"><a class="header-anchor" href="#页面栈-路由"><span>页面栈(路由)</span></a></h2><h2 id="插件" tabindex="-1"><a class="header-anchor" href="#插件"><span>插件</span></a></h2></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: vitotu@qq.com">vito</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Dc9h1HB2.js" defer></script>
  </body>
</html>
