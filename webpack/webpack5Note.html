<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/img/cat.jpg"><title>webpack进阶知识 | Vito's blog</title><meta name="description" content="vito的个人网站">
    <link rel="preload" href="/assets/style-BHfFXfh2.css" as="style"><link rel="stylesheet" href="/assets/style-BHfFXfh2.css">
    <link rel="modulepreload" href="/assets/app-D780woWr.js"><link rel="modulepreload" href="/assets/webpack5Note.html-BZKTeF8L.js">
    <link rel="prefetch" href="/assets/guide.html-CmJKhG8M.js" as="script"><link rel="prefetch" href="/assets/index.html-BlCdA2sC.js" as="script"><link rel="prefetch" href="/assets/10sortedAlgorithm.html-DBU3HjOh.js" as="script"><link rel="prefetch" href="/assets/common.html-C8K9XBV7.js" as="script"><link rel="prefetch" href="/assets/index.html-BWVLJSBq.js" as="script"><link rel="prefetch" href="/assets/labuladongNote.html-DZ_RBwuB.js" as="script"><link rel="prefetch" href="/assets/leetcode100.html-BkAo-aLc.js" as="script"><link rel="prefetch" href="/assets/python_sword_for_offer.html-CB_EMpa8.js" as="script"><link rel="prefetch" href="/assets/tsClassicTop10SortAlgorithm.html-NOHvf-dC.js" as="script"><link rel="prefetch" href="/assets/tsSword4Offer.html-DsJFawis.js" as="script"><link rel="prefetch" href="/assets/browser.html-BZKinRN8.js" as="script"><link rel="prefetch" href="/assets/index.html-DwpQjX00.js" as="script"><link rel="prefetch" href="/assets/index.html-CQsvKcqL.js" as="script"><link rel="prefetch" href="/assets/index.html-Dlh8GKLF.js" as="script"><link rel="prefetch" href="/assets/npm-note.html-CP0090vl.js" as="script"><link rel="prefetch" href="/assets/html5.html-BygDPoke.js" as="script"><link rel="prefetch" href="/assets/html进阶.html-CK2T-UAL.js" as="script"><link rel="prefetch" href="/assets/index.html-BbaWIPTZ.js" as="script"><link rel="prefetch" href="/assets/longList.html-CbQVBXR7.js" as="script"><link rel="prefetch" href="/assets/webSafe.html-CN98FepV.js" as="script"><link rel="prefetch" href="/assets/jsBase.html-CayrTnwp.js" as="script"><link rel="prefetch" href="/assets/jsHand.html-CW9cp6d5.js" as="script"><link rel="prefetch" href="/assets/jsPlus.html-DWazrhP4.js" as="script"><link rel="prefetch" href="/assets/abstract.html-4odPQpS9.js" as="script"><link rel="prefetch" href="/assets/auto-app.html-fjABZOiC.js" as="script"><link rel="prefetch" href="/assets/wechat-miniAppBase.html-CxZ3WNxi.js" as="script"><link rel="prefetch" href="/assets/qiankun.html-DADexkNG.js" as="script"><link rel="prefetch" href="/assets/gitUseNote.html-DCaBF8UP.js" as="script"><link rel="prefetch" href="/assets/index.html-CQgrRJxW.js" as="script"><link rel="prefetch" href="/assets/UbuntuUsingNode.html-BUuncV5-.js" as="script"><link rel="prefetch" href="/assets/小新pro14ACH安装Ubuntu并美化.html-MVhmBllE.js" as="script"><link rel="prefetch" href="/assets/axios.html-DV53A93m.js" as="script"><link rel="prefetch" href="/assets/index.html-baDTWm8X.js" as="script"><link rel="prefetch" href="/assets/webNetwork.html-vTY-xxIP.js" as="script"><link rel="prefetch" href="/assets/react-base.html-ZrIFP84z.js" as="script"><link rel="prefetch" href="/assets/express.html-BpAmasid.js" as="script"><link rel="prefetch" href="/assets/koa基础.html-CxGZU8Ol.js" as="script"><link rel="prefetch" href="/assets/next.html-DBYTfP--.js" as="script"><link rel="prefetch" href="/assets/index.html-l1vuQ4L4.js" as="script"><link rel="prefetch" href="/assets/index.html-DnKykf3E.js" as="script"><link rel="prefetch" href="/assets/index.html-k1cbOZo5.js" as="script"><link rel="prefetch" href="/assets/伯恩斯新情绪疗法.html-DXMYP4EZ.js" as="script"><link rel="prefetch" href="/assets/伯恩斯新情绪疗法2.html-D0_Nmrxh.js" as="script"><link rel="prefetch" href="/assets/伯恩斯新情绪疗法3.html-CVSwmQu8.js" as="script"><link rel="prefetch" href="/assets/依恋的形成.html-DyPsWFex.js" as="script"><link rel="prefetch" href="/assets/穷查理宝典读书笔记.html-CIGmp3E0.js" as="script"><link rel="prefetch" href="/assets/index.html-cqzzYvCK.js" as="script"><link rel="prefetch" href="/assets/Pinia.html-Cns2mKsA.js" as="script"><link rel="prefetch" href="/assets/vue2base.html-BqvkP4uR.js" as="script"><link rel="prefetch" href="/assets/vue3plus.html-InFu0zUe.js" as="script"><link rel="prefetch" href="/assets/webpackNote.html-joFLx0pV.js" as="script"><link rel="prefetch" href="/assets/index.html-DvJxgjWw.js" as="script"><link rel="prefetch" href="/assets/index.html-C4QvPLQn.js" as="script"><link rel="prefetch" href="/assets/index.html-fwcltNkL.js" as="script"><link rel="prefetch" href="/assets/index.html-BEMv-t_U.js" as="script"><link rel="prefetch" href="/assets/index.html-KGFp-QQT.js" as="script"><link rel="prefetch" href="/assets/index.html-D6ItVC7d.js" as="script"><link rel="prefetch" href="/assets/index.html-C0cO0RMb.js" as="script"><link rel="prefetch" href="/assets/addInfo.html-DGDM_nBg.js" as="script"><link rel="prefetch" href="/assets/guide.html-CJJ12F17.js" as="script"><link rel="prefetch" href="/assets/additionalInfo.html-DOfBy4P1.js" as="script"><link rel="prefetch" href="/assets/guide.html-DaKtd7mV.js" as="script"><link rel="prefetch" href="/assets/addInfo.html-Vgi6mfzK.js" as="script"><link rel="prefetch" href="/assets/guide.html-DarE4kMA.js" as="script"><link rel="prefetch" href="/assets/guide.html-DL4WaA4l.js" as="script"><link rel="prefetch" href="/assets/addInfo.html-Dh-bP902.js" as="script"><link rel="prefetch" href="/assets/HKShingMunReservoir.html-hKdMmYXt.js" as="script"><link rel="prefetch" href="/assets/guide.html-MmsZ1PNS.js" as="script"><link rel="prefetch" href="/assets/resource.html-CJjT8CSX.js" as="script"><link rel="prefetch" href="/assets/orgin.html-CHwDy82h.js" as="script"><link rel="prefetch" href="/assets/outputGuide.html-CYZLR0eZ.js" as="script"><link rel="prefetch" href="/assets/index.html-C7UEGyok.js" as="script"><link rel="prefetch" href="/assets/guide.html-CYO7Exn0.js" as="script"><link rel="prefetch" href="/assets/mustache.html-1xHOQUQU.js" as="script"><link rel="prefetch" href="/assets/reactive.html-6lJgzqXP.js" as="script"><link rel="prefetch" href="/assets/index.html-BsWJ4Rby.js" as="script"><link rel="prefetch" href="/assets/vDom.html-B2C95nUW.js" as="script"><link rel="prefetch" href="/assets/index.html-DhOu9U35.js" as="script"><link rel="prefetch" href="/assets/index.html-B8GvJKKW.js" as="script"><link rel="prefetch" href="/assets/index.html-DI18l6yc.js" as="script"><link rel="prefetch" href="/assets/404.html-2PsX3of_.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">Vito&#39;s blog</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsBase.html" aria-label="js基础"><!---->js基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/es6_/" aria-label="es6+基础"><!---->es6+基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsPlus.html" aria-label="js进阶"><!---->js进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsHand.html" aria-label="js手写系列"><!---->js手写系列<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/typescript/" aria-label="typescript"><!---->typescript<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>js读书笔记</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsAsync/" aria-label="js异步编程"><!---->js异步编程<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsDeep/" aria-label="你不知道的js系列"><!---->你不知道的js系列<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2base.html" aria-label="vue2基础"><!---->vue2基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2plus/" aria-label="vue2进阶"><!---->vue2进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue3base/" aria-label="vue3基础"><!---->vue3基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vuex/" aria-label="vuex"><!---->vuex<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vueRouter/" aria-label="vue router"><!---->vue router<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/Pinia.html" aria-label="pinia"><!---->pinia<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/html/" aria-label="html"><!---->html<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="css"><span class="title">css</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="css"><span class="title">css</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3/" aria-label="图解css3"><!---->图解css3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3plus/" aria-label="css进阶"><!---->css进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/scss/" aria-label="scss"><!---->scss<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/browser/browser.html" aria-label="浏览器"><!---->浏览器<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/network/webNetwork.html" aria-label="网络通信"><!---->网络通信<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Linux"><span class="title">Linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Linux"><span class="title">Linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/gitUseNote.html" aria-label="git使用笔记"><!---->git使用笔记<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/UbuntuUsingNode.html" aria-label="linux使用记录"><!---->linux使用记录<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/devToolsNote/npm-note.html" aria-label="npm"><!---->npm<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/webpack/webpackNote.html" aria-label="webpack基础"><!---->webpack基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/webpack/webpack5Note.html" aria-label="webpack5"><!---->webpack5<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/micro-app/qiankun.html" aria-label="qiankun"><!---->qiankun<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsClassicTop10SortAlgorithm.html" aria-label="排序算法"><!---->排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsSword4Offer.html" aria-label="剑指offer"><!---->剑指offer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/common.html" aria-label="常见算法"><!---->常见算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/10sortedAlgorithm.html" aria-label="排序算法python"><!---->排序算法python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/python_sword_for_offer.html" aria-label="剑指offer-python"><!---->剑指offer-python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/labuladongNote.html" aria-label="labuladong算法"><!---->labuladong算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/vitotu" aria-label="github主页" rel="noopener noreferrer" target="_blank"><!---->github主页<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsBase.html" aria-label="js基础"><!---->js基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/es6_/" aria-label="es6+基础"><!---->es6+基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsPlus.html" aria-label="js进阶"><!---->js进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/jsHand.html" aria-label="js手写系列"><!---->js手写系列<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/typescript/" aria-label="typescript"><!---->typescript<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>js读书笔记</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsAsync/" aria-label="js异步编程"><!---->js异步编程<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/js/jsDeep/" aria-label="你不知道的js系列"><!---->你不知道的js系列<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2base.html" aria-label="vue2基础"><!---->vue2基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue2plus/" aria-label="vue2进阶"><!---->vue2进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vue3base/" aria-label="vue3基础"><!---->vue3基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vuex/" aria-label="vuex"><!---->vuex<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/vueRouter/" aria-label="vue router"><!---->vue router<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vue/Pinia.html" aria-label="pinia"><!---->pinia<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/html/" aria-label="html"><!---->html<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="css"><span class="title">css</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="css"><span class="title">css</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3/" aria-label="图解css3"><!---->图解css3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/css3plus/" aria-label="css进阶"><!---->css进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/scss/" aria-label="scss"><!---->scss<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/browser/browser.html" aria-label="浏览器"><!---->浏览器<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/network/webNetwork.html" aria-label="网络通信"><!---->网络通信<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Linux"><span class="title">Linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Linux"><span class="title">Linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/gitUseNote.html" aria-label="git使用笔记"><!---->git使用笔记<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/linuxNote/UbuntuUsingNode.html" aria-label="linux使用记录"><!---->linux使用记录<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="开发构建工具"><span class="title">开发构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/devToolsNote/npm-note.html" aria-label="npm"><!---->npm<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/webpack/webpackNote.html" aria-label="webpack基础"><!---->webpack基础<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/webpack/webpack5Note.html" aria-label="webpack5"><!---->webpack5<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/micro-app/qiankun.html" aria-label="qiankun"><!---->qiankun<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsClassicTop10SortAlgorithm.html" aria-label="排序算法"><!---->排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/tsSword4Offer.html" aria-label="剑指offer"><!---->剑指offer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/common.html" aria-label="常见算法"><!---->常见算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/10sortedAlgorithm.html" aria-label="排序算法python"><!---->排序算法python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/python_sword_for_offer.html" aria-label="剑指offer-python"><!---->剑指offer-python<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/algorithm/labuladongNote.html" aria-label="labuladong算法"><!---->labuladong算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/vitotu" aria-label="github主页" rel="noopener noreferrer" target="_blank"><!---->github主页<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">webpack进阶知识 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="webpack进阶知识" tabindex="-1"><a class="header-anchor" href="#webpack进阶知识"><span>webpack进阶知识</span></a></h1><h2 id="webpack5" tabindex="-1"><a class="header-anchor" href="#webpack5"><span>webpack5</span></a></h2><p>此版本重点关注以下内容:</p><ul><li>通过持久缓存提高构建性能.</li><li>使用更好的算法和默认值来改善长期缓存.</li><li>通过更好的树摇和代码生成来改善捆绑包大小.</li><li>清除处于怪异状态的内部结构，同时在 v4 中实现功能而不引入任何重大更改.</li><li>通过引入重大更改来为将来的功能做准备，以使我们能够尽可能长时间地使用 v5.</li></ul><h3 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h3><ul><li>npm i webpack@next webpack-cli -D</li></ul><h3 id="自动删除-node-js-polyfills" tabindex="-1"><a class="header-anchor" href="#自动删除-node-js-polyfills"><span>自动删除 Node.js Polyfills</span></a></h3><p>早期，webpack 的目标是允许在浏览器中运行大多数 node.js 模块，但是模块格局发生了变化，许多模块用途现在主要是为前端目的而编写的。webpack &lt;= 4 附带了许多 node.js 核心模块的 polyfill，一旦模块使用任何核心模块（即 crypto 模块），这些模块就会自动应用。</p><p>尽管这使使用为 node.js 编写的模块变得容易，但它会将这些巨大的 polyfill 添加到包中。在许多情况下，这些 polyfill 是不必要的。</p><p>webpack 5 会自动停止填充这些核心模块，并专注于与前端兼容的模块。</p><p>迁移：</p><ul><li>尽可能尝试使用与前端兼容的模块。</li><li>可以为 node.js 核心模块手动添加一个 polyfill。错误消息将提示如何实现该目标。</li></ul><h3 id="chunk-和模块-id" tabindex="-1"><a class="header-anchor" href="#chunk-和模块-id"><span>Chunk 和模块 ID</span></a></h3><p>添加了用于长期缓存的新算法。在生产模式下默认情况下启用这些功能。</p><p><code>chunkIds: &quot;deterministic&quot;, moduleIds: &quot;deterministic&quot;</code></p><h3 id="chunk-id" tabindex="-1"><a class="header-anchor" href="#chunk-id"><span>Chunk ID</span></a></h3><p>你可以不用使用 <code>import(/* webpackChunkName: &quot;name&quot; */ &quot;module&quot;)</code> 在开发环境来为 chunk 命名，生产环境还是有必要的</p><p>webpack 内部有 chunk 命名规则，不再是以 id(0, 1, 2)命名了</p><h3 id="tree-shaking" tabindex="-1"><a class="header-anchor" href="#tree-shaking"><span>Tree Shaking</span></a></h3><ol><li>webpack5 现在能够处理对嵌套模块的 tree shaking</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// inner.js</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// module.js</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> inner <span class="token keyword">from</span> <span class="token string">&#39;./inner&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token punctuation">{</span> inner <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// user.js</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">&#39;./module&#39;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>inner<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在生产环境中, inner 模块暴露的 <code>b</code> 会被删除</p><ol start="2"><li>webpack5 现在能够处理多个模块之前的关系</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> something <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./something&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">usingSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> something<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token function">usingSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当设置了<code>&quot;sideEffects&quot;: false</code>时，一旦发现<code>test</code>方法没有使用，不但删除<code>test</code>，还会删除<code>&quot;./something&quot;</code></p><ol start="3"><li>webpack5 现在能处理对 Commonjs 的 tree shaking</li></ol><h3 id="output" tabindex="-1"><a class="header-anchor" href="#output"><span>Output</span></a></h3><p>webpack 4 默认只能输出 ES5 代码</p><p>webpack 5 开始新增一个属性 output.ecmaVersion, 可以生成 ES5 和 ES6 / ES2015 代码.</p><p>如：<code>output.ecmaVersion: 2015</code></p><h3 id="splitchunk" tabindex="-1"><a class="header-anchor" href="#splitchunk"><span>SplitChunk</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// webpack4</span></span>
<span class="line"><span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">;</span> <span class="token comment">// 针对所有的文件的大小限制</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// webpack5</span></span>
<span class="line"><span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token comment">// 针对js文件的大小限制</span></span>
<span class="line">  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token comment">// 针对样式文件的大小限制</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="caching" tabindex="-1"><a class="header-anchor" href="#caching"><span>Caching</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// 配置缓存</span></span>
<span class="line"><span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 磁盘存储</span></span>
<span class="line">  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;filesystem&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">buildDependencies</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 当配置修改时，缓存失效</span></span>
<span class="line">    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">[</span>__filename<span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缓存将存储到 <code>node_modules/.cache/webpack</code></p><h3 id="监视输出文件" tabindex="-1"><a class="header-anchor" href="#监视输出文件"><span>监视输出文件</span></a></h3><p>之前 webpack4 总是在第一次构建时输出全部文件，但是监视重新构建时会只更新修改的文件。</p><p>而webpack5在第一次构建时会找到输出文件看是否有变化，从而决定要不要输出全部文件。</p><h3 id="默认值" tabindex="-1"><a class="header-anchor" href="#默认值"><span>默认值</span></a></h3><ul><li><code>entry: &quot;./src/index.js</code></li><li><code>output.path: path.resolve(__dirname, &quot;dist&quot;)</code></li><li><code>output.filename: &quot;[name].js&quot;</code></li></ul><h3 id="更多内容" tabindex="-1"><a class="header-anchor" href="#更多内容"><span>更多内容</span></a></h3><p><a href="https://github.com/webpack/changelog-v5" target="_blank" rel="noopener noreferrer">https://github.com/webpack/changelog-v5</a></p><h2 id="webpack高级" tabindex="-1"><a class="header-anchor" href="#webpack高级"><span>webpack高级</span></a></h2><p>对于脚手架，以vue-cli为例，vue2集成了webpack构建工具，使用<code>npx vue-cli-service inspect --mode=development &gt; [文件名]</code>命令可将vue2使用的配置生成文件</p><h3 id="loader原理浅析" tabindex="-1"><a class="header-anchor" href="#loader原理浅析"><span>loader原理浅析</span></a></h3><p>loader主要用于处理webpack不能处理的资源，其本质是一个函数，详细参考<a href="https://www.webpackjs.com/api/loaders/" target="_blank" rel="noopener noreferrer">官方文档</a><br> 以下为一个简单的babel-loader:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> getOptions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;loader-utils&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取传入loader的options选项</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> validate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;schema-utils&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 验证传入options是否符合schema规则</span></span>
<span class="line"><span class="token keyword">const</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@babel/core&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// babel核心编译库</span></span>
<span class="line"><span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;util&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通用方法</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> babelSchema <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./babelSchema.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自定义的schema规则，json格式</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// babel.transform用来编译代码的方法</span></span>
<span class="line"><span class="token comment">// 是一个普通异步方法</span></span>
<span class="line"><span class="token comment">// util.promisify将普通异步方法转化成基于promise的异步方法</span></span>
<span class="line"><span class="token keyword">const</span> transform <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">promisify</span><span class="token punctuation">(</span>babel<span class="token punctuation">.</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// content为资源内容，map为源码与编译后代码映射，meta元数据,map和meta都是可选项</span></span>
<span class="line">  <span class="token comment">// 获取loader的options配置</span></span>
<span class="line">  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 校验babel的options的配置</span></span>
<span class="line">  <span class="token function">validate</span><span class="token punctuation">(</span>babelSchema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Babel Loader&#39;</span> <span class="token comment">// 验证出错时，报错的loader名</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 创建异步loader，调用callback相当于return</span></span>
<span class="line">  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this.callback为同步loader</span></span>
<span class="line">  <span class="token comment">/* callback接收参数schema(ts表示法)</span>
<span class="line">    this.callback(</span>
<span class="line">      err: Error | null,</span>
<span class="line">      content: string | Buffer,</span>
<span class="line">      sourceMap?: SourceMap,</span>
<span class="line">      meta?: any</span>
<span class="line">    );</span>
<span class="line">  */</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 使用babel编译代码</span></span>
<span class="line">  <span class="token function">transform</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> options<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>code<span class="token punctuation">,</span> map<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> code<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 多个loader的执行顺序总是从后往前，但pitch正好相反，传入data在执行阶段会挂载到this下，可以传递共享信息，还可利用pitch函数跳过某些loader</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="plugin原理浅析" tabindex="-1"><a class="header-anchor" href="#plugin原理浅析"><span>plugin原理浅析</span></a></h3><p>plugin是一个类，因此使用时需要new操作符实例化<br> plugin通过hook，捕获在每个编译(compilation)中触发的所有关键事件。在编译的每一步，plugin都具备完全访问webpack的compiler对象的能力，如果情况合适，还可以访问当前compilation对象。</p><ul><li>tapable是webpack的核心工具，提供了plugin接口,简单的tapable类：</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> SyncHook<span class="token punctuation">,</span> SyncBailHook<span class="token punctuation">,</span> AsyncParallelHook<span class="token punctuation">,</span> AsyncSeriesHook <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;tapable&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Lesson</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 初始化hooks容器</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 同步hooks，任务回依次执行</span></span>
<span class="line">      <span class="token comment">// go: new SyncHook([&#39;address&#39;])</span></span>
<span class="line">      <span class="token comment">// SyncBailHook：一旦有返回值就会退出～</span></span>
<span class="line">      <span class="token literal-property property">go</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">SyncBailHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;address&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 异步hooks</span></span>
<span class="line">      <span class="token comment">// AsyncParallelHook：异步并行</span></span>
<span class="line">      <span class="token comment">// leave: new AsyncParallelHook([&#39;name&#39;, &#39;age&#39;]),</span></span>
<span class="line">      <span class="token comment">// AsyncSeriesHook: 异步串行</span></span>
<span class="line">      <span class="token literal-property property">leave</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">AsyncSeriesHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 往hooks容器中注册事件/添加回调函数</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>go<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&#39;class0318&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;class0318&#39;</span><span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token number">111</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>go<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&#39;class0410&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;class0410&#39;</span><span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>leave<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">&#39;class0510&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;class0510&#39;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>leave<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">&#39;class0610&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;class0610&#39;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 触发hooks</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&#39;c318&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>leave<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span><span class="token string">&#39;jack&#39;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 代表所有leave容器中的函数触发完了，才触发</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;end~~~&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lesson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">l<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">l<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>简单的copy插件</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span>promisify<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;util&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> validate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;schema-utils&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> globby <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;globby&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./schema.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> Compilation <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> readFile <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span>RawSource<span class="token punctuation">}</span> <span class="token operator">=</span> webpack<span class="token punctuation">.</span>sources</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">CopyWebpackPlugin</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">validate</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 验证options是否符合规范</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;CopyWebpackPlugin&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 初始化compilation</span></span>
<span class="line">    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>thisCompilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&#39;CopyWebpackPlugin&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 添加资源的hooks</span></span>
<span class="line">      compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>additionalAssets<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">&#39;CopyWebpackPlugin&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 将from中的资源复制到to中，输出出去</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">{</span> from<span class="token punctuation">,</span> ignore <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> to <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>to <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>to <span class="token operator">:</span> <span class="token string">&#39;.&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// context就是webpack配置</span></span>
<span class="line">        <span class="token comment">// 运行指令的目录</span></span>
<span class="line">        <span class="token keyword">const</span> context <span class="token operator">=</span> compiler<span class="token punctuation">.</span>options<span class="token punctuation">.</span>context<span class="token punctuation">;</span> <span class="token comment">// process.cwd()</span></span>
<span class="line">        <span class="token comment">// 将输入路径变成绝对路径</span></span>
<span class="line">        <span class="token keyword">const</span> absoluteFrom <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">isAbsolute</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span> <span class="token operator">?</span> from <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> from<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 1. 过滤掉ignore的文件</span></span>
<span class="line">        <span class="token comment">// globby(要处理的文件夹，options)</span></span>
<span class="line">        <span class="token keyword">const</span> paths <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">globby</span><span class="token punctuation">(</span>absoluteFrom<span class="token punctuation">,</span> <span class="token punctuation">{</span> ignore <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 所有要加载的文件路径数组</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 2. 读取paths中所有资源</span></span>
<span class="line">        <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span></span>
<span class="line">          paths<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">absolutePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 读取文件</span></span>
<span class="line">            <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// basename得到最后的文件名称</span></span>
<span class="line">            <span class="token keyword">const</span> relativePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 和to属性结合</span></span>
<span class="line">            <span class="token comment">// 没有to --&gt; reset.css</span></span>
<span class="line">            <span class="token comment">// 有to --&gt; css/reset.css</span></span>
<span class="line">            <span class="token keyword">const</span> filename <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> relativePath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token comment">// 文件数据</span></span>
<span class="line">              data<span class="token punctuation">,</span></span>
<span class="line">              <span class="token comment">// 文件名称</span></span>
<span class="line">              filename</span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 3. 生成webpack格式的资源</span></span>
<span class="line">        <span class="token keyword">const</span> assets <span class="token operator">=</span> files<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RawSource</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">            source<span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">filename</span><span class="token operator">:</span> file<span class="token punctuation">.</span>filename</span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 4. 添加compilation中，输出出去</span></span>
<span class="line">        assets<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">asset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          compilation<span class="token punctuation">.</span><span class="token function">emitAsset</span><span class="token punctuation">(</span>asset<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> asset<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> CopyWebpackPlugin<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://www.webpackjs.com/api/plugins/" target="_blank" rel="noopener noreferrer">官方文档</a></p><h3 id="webpack基本工作流程" tabindex="-1"><a class="header-anchor" href="#webpack基本工作流程"><span>webpack基本工作流程</span></a></h3><ol><li>初始化 Compiler：webpack(config) 得到 Compiler 对象</li><li>开始编译：调用 Compiler 对象 run 方法开始执行编译</li><li>确定入口：根据配置中的 entry 找出所有的入口文件。</li><li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行编译，再找出该模块依赖的模块，递归直到所有模块被加载进来</li><li>完成模块编译： 在经过第 4 步使用 Loader 编译完所有模块后，得到了每个模块被编译后的最终内容以及它们之间的依赖关系。</li><li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表。（注意：这步是可以修改输出内容的最后机会）</li><li>输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: vitotu@qq.com">vito</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D780woWr.js" defer></script>
  </body>
</html>
