(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{512:function(t,a,s){"use strict";s.r(a);var e=s(62),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"微信小程序基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序基础"}},[t._v("#")]),t._v(" 微信小程序基础")]),t._v(" "),s("p",[t._v("hybrid app包含小程序(微信、抖音、支付宝等平台)， native app、H5页面等；"),s("br"),t._v(" "),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序官方文档"),s("OutboundLink")],1),s("br"),t._v("\n本文用于记录小程序的入门用法，会经常与vue进行类比学习，因此要求读者具备一定的vue知识")]),t._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("p",[t._v("web端通常运行于浏览器，在微信中使用WebView，JSBridge,JsCore等技术展示页面并提供平台的开放能力；"),s("br"),t._v("\n网页开发中渲染线程与引擎线程(脚本执行线程)是互斥的，但对应小程序需中的渲染层和逻辑层是分开的"),s("br"),t._v("\n微信小程序的逻辑层中没有DOM、BOM相关api")]),t._v(" "),s("h3",{attrs:{id:"开发环境搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发环境搭建"}},[t._v("#")]),t._v(" 开发环境搭建")]),t._v(" "),s("p",[t._v("开发微信小程序面对的不是chrome等浏览器，因此需要搭建对应的开发环境，仅需两步：")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/getstart.html#%E7%94%B3%E8%AF%B7%E5%B8%90%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"}},[t._v("申请账号"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信开发这工具"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("PS：开发者工具仅支持window和macOS两个平台"),s("br"),t._v("\nTODO：完善利用VScode进行开发的文档")]),t._v(" "),s("h3",{attrs:{id:"代码结构简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码结构简介"}},[t._v("#")]),t._v(" 代码结构简介")]),t._v(" "),s("p",[t._v("通过开发者工具创建的项目，在主目录中通常包含"),s("br"),t._v("\napp.json文件用于小程序"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局配置"),s("OutboundLink")],1),t._v("，及页面注册"),s("br"),t._v("\nproject.config.json开发者工具配置"),s("br"),t._v("\nsitemap.json用于配置微信索引，类似于SEO，"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/sitemap.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整配置"),s("OutboundLink")],1),s("br"),t._v("\napp.js入口文件"),s("br"),t._v("\napp.css/app.wxss全局样式"),s("br"),t._v("\npages目录，存放页面文件")]),t._v(" "),s("p",[t._v("页面目录结构以index为例通常为：")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("目录结构")]),t._v(" "),s("p",[t._v("pages/index/"),s("br"),t._v("\n├── index.json 当前"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("页面配置"),s("OutboundLink")],1),t._v("与app.json类似，在当页会覆盖app.json中的部分相同配置"),s("br"),t._v("\n├── index.wxss 页面样式，类似于css"),s("br"),t._v("\n├── index.js 页面逻辑"),s("br"),t._v("\n└── index.wxml 页面结构， 类似于vue的template，但仅支持微信中提供的标签或自定义的组件")])]),t._v(" "),s("h3",{attrs:{id:"宿主环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#宿主环境"}},[t._v("#")]),t._v(" 宿主环境")]),t._v(" "),s("p",[t._v("小程序运行环境是由微信客户端提供的，分成渲染层(运行WXML和WXSS)和逻辑层(运行js脚本)，分别对应了两个不同的线程管理,网络请求则由native转发")]),t._v(" "),s("p",[t._v("与VUE的VM类似小程序只有一个app实例，js文件中window对象被wx对象取代，wx对象上包含多种微信开放能力api"),s("br"),t._v("\n微信客户端在装在页面时会优先读取json配置文件，而后是wxml,wxss文件，最后加载js")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js文件中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLaunch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js页面文件中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLoad")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"协作开发与发布上线"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#协作开发与发布上线"}},[t._v("#")]),t._v(" 协作开发与发布上线")]),t._v(" "),s("p",[t._v("依托微信，小程序的上线需要通过开发者工具将代码打包上传至腾讯，由腾讯的服务器负责资源分发"),s("br"),t._v("\n搜索微信公共平台，使用注册的微信号扫码，选择对应小程序登录，即可访问小程序管理后台"),s("br"),t._v("\n小程序管理后台可设置开发者权限，体验者权限等进行协作开发"),s("br"),t._v("\n管理后台进行小程序版本管理，包含提交的版本(开发者工具上提交的版本)、体验版本，上线版本等")]),t._v(" "),s("h2",{attrs:{id:"小程序框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序框架"}},[t._v("#")]),t._v(" 小程序框架")]),t._v(" "),s("p",[t._v("小程序框架主要分为逻辑层和视图层，并在两层间提供的数据传输和事件系统")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/scene.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("场景值"),s("OutboundLink")],1),t._v("描述用户进入小程序的路径")]),t._v(" "),s("h3",{attrs:{id:"视图层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视图层"}},[t._v("#")]),t._v(" 视图层")]),t._v(" "),s("p",[t._v("视图层主要由wxml和wxss编写，将逻辑层的数据映射为视图，同时将视图层的事件发送给逻辑层"),s("br"),t._v("\n小程序的数据也是响应式的，wxml中同样支持类似于vue的模板语法：")]),t._v(" "),s("ul",[s("li",[t._v("wxml")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- wxml --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tapMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{message}}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("model:")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{value}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v(" 双向绑定(只能绑定单个字段，不支持路径)\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("custom-component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("model:")]),t._v("properties-name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{value}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" 自定义组件的双向绑定\n与vue中类似，自定义组件需设置properties属性，子组件内部通过this.setData({name:''})的方式主动触发更新\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{array}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{item}}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" 列表渲染\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{view == "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("webview}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("webview"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" 条件渲染\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("elif")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{view == "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("app}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("app"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("else")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{view == "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("MINA}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("MINA"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("view")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MINA'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'input'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("tapName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("wxss")])]),t._v(" "),s("p",[t._v("wxss具有css大部分特性，同时对css进行了两点扩展：")]),t._v(" "),s("ol",[s("li",[t._v("尺寸单位：rpx，以iPhone6屏幕为参考，iPhone屏幕宽度为375px，共有750个物理像素，对应750rpx的宽度")]),t._v(" "),s("li",[t._v("样式导入：使用@import导入外联样式时，使用相对路径并以"),s("code",[t._v(";")]),t._v("结束")])]),t._v(" "),s("p",[t._v("目前仅支持类选择器、id选择器、元素选择器、群组选择器、"),s("code",[t._v("::after")]),t._v("、"),s("code",[t._v("::before")]),t._v("这6种")]),t._v(" "),s("ul",[s("li",[t._v("wxs")])]),t._v(" "),s("p",[t._v("wxs是小程序的一套脚本语言，类似于"),s("code",[t._v("<script>")]),t._v("标签，但有其独特的语法，"),s("br"),t._v("\n运行环境与其他js代码隔离，不依赖于运行时的基础库版本"),s("br"),t._v("\n基础库版本低于2.4.4时，其函数不能作为组件的事件回调"),s("br"),t._v(" "),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文档"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("wxs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("m1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n  var msg = "hello world";\n  module.exports.message = msg;\n'),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("wxs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("wxs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("m2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./test.wxs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("wxs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{m1.message}}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("事件系统")])]),t._v(" "),s("p",[t._v('在wxml标签属性中，可以使用bind*="callback" (或bind:*="callback") 来绑定一个事件；'),s("br"),t._v("\n也可以使用catch绑定来阻止事件向上冒泡；"),s("br"),t._v("\n使用mut-bind绑定则会在在mut-bind各级绑定中仅有一个绑定函数会被触发；"),s("br"),t._v("\n给上述绑定加上capture-前缀则可在事件捕获阶段监听事件")]),t._v(" "),s("p",[t._v("wxs从2.4.4基础库版本后支持函数绑定事件，接收2个参数event和ownerInstance对象，具体用法"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),s("OutboundLink")],1),s("br"),t._v("\n事件分为冒泡事件与非冒泡事件，冒泡事件包含touch*, tap, longpress, longtap以及动画相关事件，其他如无特殊声明均为非冒泡事件")]),t._v(" "),s("p",[t._v("事件对象的种类即其包含的属性方法"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("获取界面上的节点信息(类似DOM api)")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成SelectorQuery对象，可用于在指定范围内找到wxml节点对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" query "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createSelectQuery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义组件中推荐使用this.createSelectorQuery()")]),t._v("\nquery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回NodesRef对象实例，类似于DOM节点")]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/SelectorQuery.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SelectorQuery文档"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/NodesRef.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("NodesRef对象文档"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("wx.createInterSectionObserver api则与浏览器的IntersectionObserver api 类似")]),t._v(" "),s("ul",[s("li",[t._v("初始渲染缓存")])]),t._v(" "),s("p",[t._v("小程序初始化逻辑层时，先初始化页面this对象，然后发送相关数据到视图层，视图层等待逻辑层初始化完毕后，渲染页面"),s("br"),t._v("\n冷启动时，逻辑层初始化事件较长，启用初始渲染缓存可以让视图层直接使用缓存的数据而无需等待逻辑层初始化完毕，从而加速启动过程"),s("br"),t._v("\n通过json文件中增加"),s("code",[t._v('"initialRenderingCache":"static"')]),t._v("配置项开启渲染缓存，小程序首次打开后页面初始数据将被缓存，在第二次打开时检查缓存命中")]),t._v(" "),s("h3",{attrs:{id:"逻辑层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑层"}},[t._v("#")]),t._v(" 逻辑层")]),t._v(" "),s("p",[t._v("小程序js代码会在启动时运行，直到小程序销毁，类似于ServiceWorker, 逻辑层也称为App Service")]),t._v(" "),s("p",[t._v("在app.js文件中，调用"),s("code",[t._v("App()")]),t._v("方法注册小程序实例，与vue类似，整个小程序只有一个app实例，全页面共享，"),s("code",[t._v("可通过getApp")]),t._v("方法获取到这个唯一的实例"),s("br"),t._v("\n在各页面的js文件中，使用"),s("code",[t._v("Page()")]),t._v("方法注册页面，与vue的mixin类似，小程序通过引入behaviors选项可实现，多个页面有相同的数据字段和方法"),s("br"),t._v("\n对于复杂页面可以使用"),s("code",[t._v("Component")]),t._v("方法来构造页面，语法上与"),s("code",[t._v("Page()")]),t._v("的主要区别是方法要放在"),s("code",[t._v("methods()")]),t._v("选项中")]),t._v(" "),s("ul",[s("li",[t._v("页面路由")])]),t._v(" "),s("p",[t._v("小程序页面路由全部由框架管理，维护有页面栈，可通过wx.navigate*等api进行手动跳转，也可使用"),s("code",[t._v('<navigator open-type="navigate*"></navigator>')]),t._v("等组件")]),t._v(" "),s("ul",[s("li",[t._v("模块化")])]),t._v(" "),s("p",[t._v("小程序仅支持module.exports和require的方式进行模块导出和导入"),s("br"),t._v("\nTODO：npm包管理器的使用")]),t._v(" "),s("ul",[s("li",[t._v("API")])]),t._v(" "),s("p",[t._v("小程序通过API开放微信的能力，主要分为同步API和异步API； 异步api支持回调和promise两种方式，若结构参数Object中不含"),s("code",[t._v("success/fail/complete")]),t._v("时，默认返回promise对象，但部分结构"),s("code",[t._v("downloadFile, request, createCamera")]),t._v("等还需要自行promisify封装"),s("br"),t._v("\nwx.onUnhandledRejection可以监听未处理的Promise拒绝事件")]),t._v(" "),s("h2",{attrs:{id:"生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://res.wx.qq.com/wxdoc/dist/assets/img/page-lifecycle.2e646c86.png",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期"),s("OutboundLink")],1),s("br"),t._v("\nTODO:")]),t._v(" "),s("p",[t._v("冷启动：用户首次打开或小程序销毁后用户再次打开，再次打开时，若带有path则进入对应path页面，若无path则进入首页或遵循重新启动策略"),s("code",[t._v("restartStrategy")]),s("br"),t._v("\n热启动：已打开过小程序，小程序未被销毁，从后台切换到前台为热启动，热启动可利用场景值和path再次回到小程序或对应的页面")]),t._v(" "),s("p",[t._v("前台：界面被展示给用户，称为前台状态"),s("br"),t._v("\n后台：关闭小程序时，小程序并没有真正关闭，而是进入后台状态，此时小程序还可短暂运行一小段时间，但部分api受限(常规切后台方式外，前台运行时锁屏或直接将微信切后台均可进入后台方式)"),s("br"),t._v("\n小程序进入后台后5秒，会停止小程序js线程执行，随后进入挂起状态，此时会保存小程序内存状态，但代码会停止执行，事件及接口回调会在再次进入前台时触发"),s("br"),t._v("\n当使用了后台音乐播放、后台地理位置等能力时小程序可以在后台持续运行"),s("br"),t._v("\n当小程序可能将要被销毁前"),s("code",[t._v("onSaveExitState")]),t._v("函数会被调用，在回调中可以通过返回数据对象的方式缓存一些数据，返回对象格式："),s("code",[t._v("{data:Object, expireTimeStamp: time}")])]),t._v(" "),s("h2",{attrs:{id:"组件化开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件化开发"}},[t._v("#")]),t._v(" 组件化开发")]),t._v(" "),s("p",[t._v("创建自定义组件：在js中通过"),s("code",[t._v("Component()")]),t._v("来注册组件，在json文件中声明"),s("code",[t._v('"component":true')]),t._v("字段"),s("br"),t._v("\n使用组件: 在json文件使用声明"),s("code",[t._v('"usingComponents":{"component-tag-name":"自定义组件的路径"}"')])]),t._v(" "),s("p",[t._v("组件wxml模板中支持"),s("code",[t._v("<slot></slot>")]),t._v("标签，与vue中插槽类似，默认情况只能有一个slot，多个slot需要在js中声明启用"),s("br"),t._v("\n多个slot用不同的name区别，使用时通过"),s("code",[t._v('<view slot="name"/>')]),t._v("方式指定要插入的slot，与具名插槽类似")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("multipleSlots")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("小程序中也支持类似vue的prop的方式传参")]),t._v(" "),s("p",[t._v("使用Component构造页面时，组件的properties属性可用于接收页面query参数，页面的生命周期方法应该写在methods中")]),t._v(" "),s("h3",{attrs:{id:"组件样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件样式"}},[t._v("#")]),t._v(" 组件样式")]),t._v(" "),s("p",[t._v("组件对应wxss仅对组件内节点生效，组件定义与使用时仅能使用class选择器，避免使用后代选择器，继承样式会影响到组件内，其他样式则不会影响"),s("br"),t._v("\n与vue的scoped类似，组件的样式也存在隔离，可以通过js的的方式来指定隔离选项")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("styleIsolation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'isolated'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认值，自定义组件内外，使用 class 指定的样式将不会相互影响")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// apply-shared // 页面wxss样式将影响到自定义组件，组件不会影响页面")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// shared // 页面影响组件，组件会影响其他设置了apply-shared或shared的组件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// page-isolated // 组件作为页面时，页面禁用app.wxss，同时页面不会影响其他组件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// page-apply-shared // 同上，但设为shared的组件会影响页面")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// page-shared // 禁用app.wxss，其他与shared相同")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("addGlobalClass")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等价与 styleIsolation:apply-shared,但styleIsolation会屏蔽此选项")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("externalClasses")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-class'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 支持外部传入 className")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("virtualHost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将组件节点虚拟化，类似于vue中template节点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("2.10.1版本后也支持在json文件中配置styleIsolation字段"),s("br"),t._v("\n另外使用标签选择器或其他特殊选择器，则对应样式会全局生效"),s("br"),t._v("\n通过"),s("code",[t._v('class="~class-name"')]),t._v("的方式组件可以引用页面中对应的样式, 通过"),s("code",[t._v("^")]),t._v("前缀的方式可以引用父组件中对应的样式，该系列前缀可连续使用")]),t._v(" "),s("h3",{attrs:{id:"组件生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件生命周期"}},[t._v("#")]),t._v(" 组件生命周期")]),t._v(" "),s("p",[t._v("与vue类似，小程序组件也有其生命周期函数，可以直接定义在Component一级参数中，也可以使用lifetimes字段声明(推荐方式，优先级最高)")]),t._v(" "),s("p",[t._v("组件可用的生命周期函数")]),t._v(" "),s("ul",[s("li",[t._v("create 组件实例刚创建号，setData还不能调用")]),t._v(" "),s("li",[t._v("attached 组件初始化完成，进入页面节点树后，")]),t._v(" "),s("li",[t._v("ready 组件在视图层布局完成后执行")]),t._v(" "),s("li",[t._v("moved 组件实例被移动到节点树的另一位置时执行")]),t._v(" "),s("li",[t._v("detached 组件离开页面节点树后")]),t._v(" "),s("li",[t._v("error 组件方法抛出错误时执行")])]),t._v(" "),s("p",[t._v("组件所在页面的生命周期函数")]),t._v(" "),s("ul",[s("li",[t._v("show 组件所在页面被展示时执行")]),t._v(" "),s("li",[t._v("hide 组件所在页面被隐藏时执行")]),t._v(" "),s("li",[t._v("resize 组件所在页面尺寸变化时执行")])]),t._v(" "),s("p",[t._v("behavior中也可声明同名的生命周期函数，并且不会与其他behavior中的同名相互覆盖")]),t._v(" "),s("h3",{attrs:{id:"组件间通信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件间通信"}},[t._v("#")]),t._v(" 组件间通信")]),t._v(" "),s("ul",[s("li",[t._v("wxml数据绑定：定义properties选项用于接收绑定的数据，与vue中props类似，可用于父传子通信")]),t._v(" "),s("li",[t._v("事件： 自定义事件，父组件"),s("code",[t._v('bind:myevent="callback"')]),t._v("， 子组件"),s("code",[t._v("this.triggerEvent('myevent', detailObject, eventOption)")]),t._v("与vue中emit类似 子传父")])]),t._v(" "),s("p",[t._v("另外还可通过父组件还可通过"),s("code",[t._v("this.selectComponent('.children-component')")]),t._v("方法获取子组件实例对象"),s("br"),t._v("\n默认情况下，小程序与插件，插件之间的不同组件无法通过该方法获取组件实例，可通过子组件中"),s("code",[t._v("behaviors:wx://component-export")]),t._v("配置及"),s("code",[t._v("export(){return customObject}")]),t._v("方法指定"),s("code",[t._v("this.selectComponent('.children-component')")]),t._v("的返回值")]),t._v(" "),s("h3",{attrs:{id:"behaviors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#behaviors"}},[t._v("#")]),t._v(" behaviors")]),t._v(" "),s("p",[t._v("类似于vue中的mixin混入,")])])}),[],!1,null,null,null);a.default=n.exports}}]);