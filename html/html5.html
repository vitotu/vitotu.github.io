<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>html进阶知识 | Vito&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/cat.jpg">
    <meta name="description" content="vito的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.6fb88674.css" as="style"><link rel="preload" href="/assets/js/app.08428b96.js" as="script"><link rel="preload" href="/assets/js/2.42bb3099.js" as="script"><link rel="preload" href="/assets/js/9.79c3a4ed.js" as="script"><link rel="prefetch" href="/assets/js/10.55bea69c.js"><link rel="prefetch" href="/assets/js/11.dee77f12.js"><link rel="prefetch" href="/assets/js/12.941894ad.js"><link rel="prefetch" href="/assets/js/13.e61cbfec.js"><link rel="prefetch" href="/assets/js/14.762853a0.js"><link rel="prefetch" href="/assets/js/15.c16a84d8.js"><link rel="prefetch" href="/assets/js/16.8fc287c3.js"><link rel="prefetch" href="/assets/js/17.d0cc04e3.js"><link rel="prefetch" href="/assets/js/18.91dc06ae.js"><link rel="prefetch" href="/assets/js/19.2cce5a1b.js"><link rel="prefetch" href="/assets/js/20.1ef4771f.js"><link rel="prefetch" href="/assets/js/21.f9660299.js"><link rel="prefetch" href="/assets/js/22.3ff01e0b.js"><link rel="prefetch" href="/assets/js/23.4788bb68.js"><link rel="prefetch" href="/assets/js/24.64e2f080.js"><link rel="prefetch" href="/assets/js/25.9478da69.js"><link rel="prefetch" href="/assets/js/26.0ddb6875.js"><link rel="prefetch" href="/assets/js/27.dbdc70f0.js"><link rel="prefetch" href="/assets/js/28.eb048d8e.js"><link rel="prefetch" href="/assets/js/29.e61fa5c2.js"><link rel="prefetch" href="/assets/js/3.92254332.js"><link rel="prefetch" href="/assets/js/30.e2b7711a.js"><link rel="prefetch" href="/assets/js/31.042ae79e.js"><link rel="prefetch" href="/assets/js/32.d4d8d049.js"><link rel="prefetch" href="/assets/js/33.54da0b69.js"><link rel="prefetch" href="/assets/js/34.63a8cc34.js"><link rel="prefetch" href="/assets/js/35.6271ea94.js"><link rel="prefetch" href="/assets/js/36.55e851bb.js"><link rel="prefetch" href="/assets/js/37.a7d50c81.js"><link rel="prefetch" href="/assets/js/38.c11cd3ed.js"><link rel="prefetch" href="/assets/js/39.66896f53.js"><link rel="prefetch" href="/assets/js/4.93d582c6.js"><link rel="prefetch" href="/assets/js/40.2c921559.js"><link rel="prefetch" href="/assets/js/41.5ca3789d.js"><link rel="prefetch" href="/assets/js/42.55db69be.js"><link rel="prefetch" href="/assets/js/43.abaf5424.js"><link rel="prefetch" href="/assets/js/44.11fb6e18.js"><link rel="prefetch" href="/assets/js/45.68a7bdb4.js"><link rel="prefetch" href="/assets/js/46.73ce9543.js"><link rel="prefetch" href="/assets/js/47.ed9c525c.js"><link rel="prefetch" href="/assets/js/48.8e6b1de5.js"><link rel="prefetch" href="/assets/js/49.4ae5906f.js"><link rel="prefetch" href="/assets/js/5.a3eaee61.js"><link rel="prefetch" href="/assets/js/50.e20ff968.js"><link rel="prefetch" href="/assets/js/51.9343e42d.js"><link rel="prefetch" href="/assets/js/52.8e86ef62.js"><link rel="prefetch" href="/assets/js/6.efaeb6bf.js"><link rel="prefetch" href="/assets/js/7.c2919e8d.js"><link rel="prefetch" href="/assets/js/8.7878b836.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6fb88674.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vito's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/jsBase/" class="nav-link">
  js基础
</a></li><li class="dropdown-item"><!----> <a href="/js/es6+/" class="nav-link">
  es6+基础
</a></li><li class="dropdown-item"><!----> <a href="/js/jsPlus/" class="nav-link">
  js进阶
</a></li><li class="dropdown-item"><!----> <a href="/js/jsHand/" class="nav-link">
  js手写系列
</a></li><li class="dropdown-item"><!----> <a href="/js/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><h4>
          js读书笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/jsAsync/" class="nav-link">
  js异步编程
</a></li><li class="dropdown-subitem"><a href="/js/jsDeep/" class="nav-link">
  你不知道的js系列
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue2base/" class="nav-link">
  vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue2plus/" class="nav-link">
  vue2进阶
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue3base/" class="nav-link">
  vue3基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/vue/vueRouter/" class="nav-link">
  vue router
</a></li></ul></div></div><div class="nav-item"><a href="/html/" class="nav-link router-link-active">
  html
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title">css</span> <span class="arrow down"></span></button> <button type="button" aria-label="css" class="mobile-dropdown-title"><span class="title">css</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  图解css3
</a></li><li class="dropdown-item"><!----> <a href="/css/css3plus/" class="nav-link">
  css进阶
</a></li><li class="dropdown-item"><!----> <a href="/css/scss/" class="nav-link">
  scss
</a></li></ul></div></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  网络通信
</a></div><div class="nav-item"><a href="/linuxNote/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发构建工具" class="dropdown-title"><span class="title">开发构建工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发构建工具" class="mobile-dropdown-title"><span class="title">开发构建工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devToolsNote/npm-note.html" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpackNote.html" class="nav-link">
  webpack基础
</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpack5Note.html" class="nav-link">
  webpack5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/tsClassicTop10SortAlgorithm.html" class="nav-link">
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/tsSword4Offer.html" class="nav-link">
  剑指offer
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/common.html" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/10sortedAlgorithm.html" class="nav-link">
  排序算法python
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/python_sword_for_offer.html" class="nav-link">
  剑指offer-python
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vitotu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/jsBase/" class="nav-link">
  js基础
</a></li><li class="dropdown-item"><!----> <a href="/js/es6+/" class="nav-link">
  es6+基础
</a></li><li class="dropdown-item"><!----> <a href="/js/jsPlus/" class="nav-link">
  js进阶
</a></li><li class="dropdown-item"><!----> <a href="/js/jsHand/" class="nav-link">
  js手写系列
</a></li><li class="dropdown-item"><!----> <a href="/js/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><h4>
          js读书笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/jsAsync/" class="nav-link">
  js异步编程
</a></li><li class="dropdown-subitem"><a href="/js/jsDeep/" class="nav-link">
  你不知道的js系列
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue2base/" class="nav-link">
  vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue2plus/" class="nav-link">
  vue2进阶
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue3base/" class="nav-link">
  vue3基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li><li class="dropdown-item"><!----> <a href="/vue/vueRouter/" class="nav-link">
  vue router
</a></li></ul></div></div><div class="nav-item"><a href="/html/" class="nav-link router-link-active">
  html
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title">css</span> <span class="arrow down"></span></button> <button type="button" aria-label="css" class="mobile-dropdown-title"><span class="title">css</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  图解css3
</a></li><li class="dropdown-item"><!----> <a href="/css/css3plus/" class="nav-link">
  css进阶
</a></li><li class="dropdown-item"><!----> <a href="/css/scss/" class="nav-link">
  scss
</a></li></ul></div></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  网络通信
</a></div><div class="nav-item"><a href="/linuxNote/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发构建工具" class="dropdown-title"><span class="title">开发构建工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发构建工具" class="mobile-dropdown-title"><span class="title">开发构建工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devToolsNote/npm-note.html" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpackNote.html" class="nav-link">
  webpack基础
</a></li><li class="dropdown-item"><!----> <a href="/webpack/webpack5Note.html" class="nav-link">
  webpack5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/tsClassicTop10SortAlgorithm.html" class="nav-link">
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/tsSword4Offer.html" class="nav-link">
  剑指offer
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/common.html" class="nav-link">
  常见算法
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/10sortedAlgorithm.html" class="nav-link">
  排序算法python
</a></li><li class="dropdown-item"><!----> <a href="/algorithm/python_sword_for_offer.html" class="nav-link">
  剑指offer-python
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vitotu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>html进阶知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html/html5.html#src和href属性的区别" class="sidebar-link">src和href属性的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/html/html5.html#script标签的async和defer的区别" class="sidebar-link">script标签的async和defer的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/html/html5.html#图片懒加载的实现方式" class="sidebar-link">图片懒加载的实现方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/html/html5.html#xss和csrf攻击" class="sidebar-link">xss和CSRF攻击</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html/html5.html#xss攻击" class="sidebar-link">XSS攻击</a></li><li class="sidebar-sub-header"><a href="/html/html5.html#csrf攻击" class="sidebar-link">CSRF攻击</a></li></ul></li><li><a href="/html/html5.html#data-url的优缺点" class="sidebar-link">data-url的优缺点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/html/html5.html#csp策略" class="sidebar-link">CSP策略</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/html/html5.html#dom几何api" class="sidebar-link">dom几何api</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="html进阶知识"><a href="#html进阶知识" class="header-anchor">#</a> html进阶知识</h1> <h2 id="src和href属性的区别"><a href="#src和href属性的区别" class="header-anchor">#</a> src和href属性的区别</h2> <p>部分引用资源的标签中会有src或href属性<br>
href是Hypertext Reference的简写，表示超文本引用，指向网络资源所在位置，用于在当前文档和引用资源之间确立联系，
当浏览器遇到href会并行下载资源并且不会停止对当前文档的处理。(同时也是为什么建议使用 link 方式加载 CSS，而不是使用 @import 方式)</p> <p>src是source的简写，目的是要把文件下载到html页面中去，用于替换当前内容，
当浏览器解析到src ，会暂停其他资源的下载和处理，直到将该资源加载或执行完毕。(这也是script标签为什么放在底部而不是头部的原因)</p> <h2 id="script标签的async和defer的区别"><a href="#script标签的async和defer的区别" class="header-anchor">#</a> script标签的async和defer的区别</h2> <ul><li>相同点: 异步加载 (fetch)</li> <li>不同点:
<ul><li>async 加载(fetch)完成后立即执行 (execution)，因此可能会阻塞 DOM 解析；</li> <li>defer 加载(fetch)完成后延迟到 DOM 解析完成后才会执行(execution)**，但会在事件 DomContentLoaded 之前</li></ul></li></ul> <p><code>&lt;script type=&quot;module&quot;&gt;</code>将自动启用严格模式<br> <img src="/assets/img/asyncdefer.9edd8d4e.svg" alt="asyncdefer.svg"><br> <a href="https://html.spec.whatwg.org/multipage/scripting.html#the-script-element" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="图片懒加载的实现方式"><a href="#图片懒加载的实现方式" class="header-anchor">#</a> 图片懒加载的实现方式</h2> <ul><li>位置计算 + 滚动事件 (Scroll) + DataSet API
<ul><li>window.scroll监听滚动事件</li> <li>比较元素clientTop，offsetTop，clientHeight 以及 scrollTop等高度判断是否出现在视口中</li> <li><code>&lt; img data-src=&quot;template.jpg&quot;/&gt;</code>,加载时使用img.src = img.dataset.src即可实现</li></ul></li> <li>getBoundingClientRect API + Scroll with Throttle + DataSet API实现
<ul><li>Element.getBoundingClientRect()返回元素大小及相对视口的位置</li> <li>基于上面的方案使用<code>img.getBoundingClientRect().top &lt; document.documentElement.clientHeight;</code>进行判断，给window.scroll加上节流即可</li></ul></li> <li>IntersectionObserver API + DataSet API实现</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// intersectionObserver API 能够监听元素是否达到视口</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">changes</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// changes: 目标元素集合</span>
  changes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// intersectionRatio</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// entry.isIntersecting表示元素是否可见</span>
      <span class="token keyword">const</span> img <span class="token operator">=</span> change<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
      observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>标签的loading=&quot;lazy&quot;属性</li></ul> <h2 id="xss和csrf攻击"><a href="#xss和csrf攻击" class="header-anchor">#</a> xss和CSRF攻击</h2> <p>简单理解，举例：在论坛或评论中输入恶意脚本<code>&lt;script&gt;恶意脚本&lt;/script&gt;</code>,攻击其他查看该网页的用户就是xss。<br>
获取用户token等登录信息，伪造请求破坏用户数据即为CSRF</p> <h3 id="xss攻击"><a href="#xss攻击" class="header-anchor">#</a> XSS攻击</h3> <p>跨站脚本攻击，攻击者脚本嵌入被攻击网站，攻击用户</p> <ul><li>存储型：把用户输入的数据“存储”在有漏洞的服务器上，当浏览器访问服务器时，脚本从服务器回传并执行(上例中的xss即为存储型)</li> <li>反射型：攻击者需要诱使用户点击恶意链接或提交表单，发起恶意请求，web服务器接收到请求时又将请求中的恶意代码反射给浏览器端，web端不会存储恶意代码</li> <li>基于DOM的XSS攻击：利用web资源传入过程，劫持并修改web页面数据</li></ul> <p>防范措施：</p> <ul><li>服务端对脚本进行过滤或转码</li> <li>充分利用<a href="#csp%E7%AD%96%E7%95%A5">CSP策略</a></li> <li>使用HttpOnly属性: 服务端设置Cookie时添加HttpOnly标志，保证Cookie不可被js脚本读取</li></ul> <h3 id="csrf攻击"><a href="#csrf攻击" class="header-anchor">#</a> CSRF攻击</h3> <p>跨站请求伪造：已登录用户访问攻击者网站，攻击者利用用户的登录状态，向被攻击网站发起恶意请求</p> <ul><li>自动发起get请求(通过img, script的src属性绕过跨域发起)</li> <li>自动发起post请求</li> <li>引诱用户点击链接(钓鱼邮件等方式)</li></ul> <p>CSRF不需要将恶意代码注入到用户网页中，只利用用户的登录状态和服务器漏洞进行攻击</p> <p>防范措施： 主要通过服务器进行防范</p> <ul><li>设置Cookie的SameSite属性：服务端设置Cookie时，SameSite值，来限制从第三方站点发送请求携带cookie的行为
<ul><li>取Strict时，完全禁止第三方cookie，在a站中请求b站的资源不会携带b站的cookie</li> <li>取Lax时，a站请求b站资源时，仅get请求会携带b站cookie，post、img、iframe等方式均不会携带b站cookie</li> <li>取None时，则任何情况下都会携带cookie</li></ul></li> <li>验证请求来源站点：服务端通过请求头中的origin和referer属性来判断请求是否来自第三方站点</li> <li>CSRF Token：服务端签发Token，并植入返回页面中，浏览器端发起请求需要带上该Token，服务端对Token进行校验</li></ul> <h2 id="data-url的优缺点"><a href="#data-url的优缺点" class="header-anchor">#</a> data-url的优缺点</h2> <p>data-url使用字符串的形式表示数据格式如下<code>data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code><br>
在html中用data-url表示图片等体积较小的资源时有如下优缺点：<br>
优点：</p> <ul><li>混合在html内容中可以减少一次http请求</li> <li>当图片时由服务端动态生成、针对每个用户都不同时，可以使用data url</li></ul> <p>缺点：</p> <ul><li>base64编码的数据体积通常是原数据体积的4/3，增加了资源大小</li> <li>data url表示的资源不能单独被缓存</li> <li>data url图片在渲染时需要等多的计算资源</li></ul> <p><a href="https://www.cnblogs.com/tianma3798/p/13582105.html" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="csp策略"><a href="#csp策略" class="header-anchor">#</a> CSP策略</h2> <p>CSP (Content Security Policy) 网页安全政策，浏览器端的白名单制度，限制各类外部资源的加载和执行，可用于防范XSS攻击<br>
启用CSP可通过HTTP响应头的Content-Security-Policy字段或网页的<code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code>标签</p> <p>限制选项：</p> <ul><li>资源加载限制：
<ul><li><code>script-src</code>：外部脚本</li> <li><code>style-src</code>：样式表</li> <li><code>img-src</code>：图像</li> <li><code>media-src</code>：媒体文件（音频和视频）</li> <li><code>font-src</code>：字体文件</li> <li><code>object-src</code>：插件（比如 Flash）</li> <li><code>child-src</code>：框架</li> <li><code>frame-ancestors</code>：嵌入的外部资源（比如<code>&lt;frame&gt;</code>、<code>&lt;iframe&gt;</code>、<code>&lt;embed&gt;</code>和<code>&lt;applet&gt;</code>）</li> <li><code>connect-src</code>：HTTP 连接（通过 XHR、WebSockets、EventSource等）</li> <li><code>worker-src</code>：worker脚本</li> <li><code>manifest-src</code>：manifest 文件</li></ul></li> <li>默认选项：
<ul><li><code>default-src</code> : 统一设置各选项默认值</li></ul></li> <li>URL限制：
<ul><li>base-uri：限制<code>&lt;base#href&gt;</code></li> <li>form-action：限制<code>&lt;form#action&gt;</code></li></ul></li> <li>其他限制：
<ul><li><code>block-all-mixed-content</code>：HTTPS 网页不得加载 HTTP 资源（浏览器已经默认开启）</li> <li><code>upgrade-insecure-requests</code>：自动将网页上所有加载外部资源的 HTTP 链接换成 HTTPS 协议</li> <li><code>plugin-types</code>：限制可以使用的插件格式</li> <li><code>sandbox</code>：浏览器行为的限制，比如不能有弹出窗口等。</li></ul></li> <li><code>report uri</code>: 阻止并报告XSS行为，浏览器会向设置的uri报告受到的XSS攻击详情</li></ul> <p><code>script-src</code>的特殊值：限制行为</p> <ul><li><code>'unsafe-inline'</code>：允许执行页面内嵌的<code>&amp;lt;script&gt;</code>标签和事件监听函数</li> <li><code>unsafe-eval</code>：允许将字符串当作代码执行，比如使用eval、setTimeout、setInterval和Function等函数。</li> <li><code>nonce</code>值：每次HTTP回应给出一个授权token，页面内嵌脚本必须有这个token，才会执行</li> <li><code>hash</code>值：列出允许执行的脚本代码的Hash值，页面内嵌脚本的哈希值只有吻合的情况下，才能执行。</li></ul> <p><code>script-src</code>和<code>object-src</code>是必设的，除非设置了<code>default-src</code>, 攻击者只要能注入脚本，其他限制都可以规避<br> <code>script-src</code>不能使用<code>unsafe-inline</code>关键字（除非伴随一个<code>nonce</code>值），也不能允许设置<code>data:URL</code><br>
必须特别注意 JSONP 的回调函数。</p> <h2 id="dom几何api"><a href="#dom几何api" class="header-anchor">#</a> dom几何api</h2> <ul><li>window.screenTop: 返回浏览器窗口到屏幕顶部边缘的CSS像素距离数值，window.screenLeft同理。</li> <li>元素.offsetTop: 只读属性，它返回当前元素border外边距相对于其offsetParent元素的border外边距的距离以像素计，元素.offsetLeft同理。</li> <li>元素.offsetWidth: 只读属性，返回一个元素的布局宽度(不含margin，body不含scroll bar)。元素.offsetHeight同理。</li></ul> <p><img src="/assets/img/domWinGeometry.c1c21c4a.png" alt="domWinGeometry"></p> <ul><li>元素.clientTop: 只读属性，返回一个元素顶部边框的宽度（以像素计）。不包括顶部外边距或内边距。元素.clientLeft同理。</li> <li>元素.clientWidth: 只读属性, 以像素计，内联元素以及没有 CSS 样式的元素的 clientWidth 属性值为 0。元素.clientWidth 属性表示元素的内部宽度(不含border和滚动条)。clientHeight同理</li> <li>元素.scrollTop：以像素计，一个元素的 scrollTop 值是这个元素的内容顶部（卷起来的）到它的视口可见内容（的顶部）的距离的度量。scrollLeft 同理</li> <li>元素.scrollWidth: 只读属性, 这个只读属性是元素内容宽度的一种度量，包括由于 overflow 溢出而在屏幕上不可见的内容。scrollHeight同理</li> <li>document滚动相关的各属性获取方式有些不同，可以使用<code>document.scrollingElement.xxx</code>, <code>document.documentElement.xxx</code></li></ul> <p><img src="/assets/img/nodeWinGeometry.2f60b63f.png" alt="nodeWinGeometry"></p> <p><a href="https://www.cnblogs.com/weiyongchao/p/13758340.html" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/26/2022, 11:18:29 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08428b96.js" defer></script><script src="/assets/js/2.42bb3099.js" defer></script><script src="/assets/js/9.79c3a4ed.js" defer></script>
  </body>
</html>
